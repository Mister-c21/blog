<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Games</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <meta name="google-adsense-account" content="ca-pub-3281893178430236">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PV154KH2JQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PV154KH2JQ');
</script>

    
    <style>
        :root {
            --primary: blueviolet;
            --bg-gradient: linear-gradient(135deg, #1a0a2e 0%, #050505 100%);
            --glass-white: rgba(248, 248, 255, 0.12);
            --glass-border: rgba(248, 248, 255, 0.18);
            --text: ghostwhite;
            --glass-modal: rgba(248, 248, 255, 0.08);
            /* Cor personalizada salva */
            --ghost: #f8f8ff; 
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { 
            margin: 0; background: var(--bg-gradient); background-attachment: fixed;
            color: var(--text); font-family: 'Roboto', sans-serif; overflow-x: hidden; 
        }

        /* --- HEADER --- */
        .header { 
            padding: 15px 20px; position: sticky; top: 0; z-index: 1000; 
            background: rgba(26, 10, 46, 0.75); backdrop-filter: blur(25px);
            border-bottom: 1px solid var(--glass-border);
            display: flex; align-items: center; justify-content: center; gap: 15px;
        }
        
        .nav-btn {
            width: 45px; height: 45px; border-radius: 50%; background: var(--glass-white);
            border: 1px solid var(--glass-border); color: var(--text);
            display: flex; align-items: center; justify-content: center;
            text-decoration: none; transition: 0.3s; font-size: 20px;
        }
        .nav-btn:hover { background: var(--primary); transform: translateX(-3px); border-color: white; }

        .search-pill {
            background: var(--glass-white); width: 100%; max-width: 640px;
            border-radius: 30px; padding: 10px 18px; display: flex;
            align-items: center; border: 1px solid var(--glass-border);
        }
        .search-pill input { flex: 1; background: none; border: none; color: white; padding: 0 12px; font-size: 16px; }

        /* --- GRID --- */
        .masonry-container { padding: 20px; max-width: 1600px; margin: 0 auto; column-gap: 16px; column-count: 2; }
        @media (min-width: 768px) { .masonry-container { column-count: 3; } }
        @media (min-width: 1024px) { .masonry-container { column-count: 5; } }

        .card {
            display: inline-block; width: 100%; margin-bottom: 16px;
            background: var(--glass-white); border-radius: 20px; overflow: hidden;
            cursor: pointer; transition: 0.4s; border: 1px solid var(--glass-border); backdrop-filter: blur(10px);
        }
        .card:hover { transform: translateY(-8px); border-color: var(--primary); }
        .card img { width: 100%; display: block; height: auto; }
        .card-name { padding: 12px; font-size: 13px; font-weight: 500; text-align: center; color: ghostwhite; }

        /* --- MODAL --- */
        #modal-overlay { position: fixed; inset: 0; background: rgba(10, 5, 20, 0.98); display: none; z-index: 2000; backdrop-filter: blur(25px); overflow-y: auto; }
        .modal-content { background: var(--glass-modal); width: 100%; min-height: 100vh; display: flex; flex-direction: column; position: relative; }
        .modal-banner-container { position: relative; width: 100%; height: 45vh; }
        .modal-banner { width: 100%; height: 100%; object-fit: cover; border-bottom: 2px solid var(--glass-border); }

        .action-btn {
            position: absolute; bottom: -25px; width: 55px; height: 55px; border-radius: 50%;
            color: white; border: 2px solid ghostwhite; cursor: pointer; display: flex;
            align-items: center; justify-content: center; font-size: 20px; z-index: 10; transition: 0.3s;
        }
        #audio-trigger { right: 20px; background: var(--primary); box-shadow: 0 4px 15px rgba(138, 43, 226, 0.5); }
        #share-trigger { left: 20px; background: #00bcd4; box-shadow: 0 4px 15px rgba(0, 188, 212, 0.5); }

        .audio-btn.playing { animation: pulse-ring 1.5s infinite; background: #ff4500 !important; }
        @keyframes pulse-ring {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 69, 0, 0.7); }
            70% { transform: scale(1.15); box-shadow: 0 0 0 20px rgba(255, 69, 0, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 69, 0, 0); }
        }

        .modal-body { padding: 45px 20px; max-width: 800px; margin: 0 auto; width: 100%; flex-grow: 1; }
        .translation-tag { color: var(--primary); font-size: 11px; font-weight: 700; text-transform: uppercase; margin-bottom: 12px; display: inline-block; border: 1px solid var(--primary); padding: 4px 10px; border-radius: 6px; }

        .btn-game { display: flex; align-items: center; justify-content: center; gap: 12px; width: 100%; padding: 18px; border-radius: 16px; color: white; font-weight: bold; text-decoration: none; margin-bottom: 12px; border: 1px solid rgba(255,255,255,0.1); transition: 0.3s; }
        .btn-steam { background: #1b2838; }
        .btn-xbox { background: #107c10; }
        .btn-gforce { background: #76b900; }
        
        .related-scroll { display: flex; gap: 15px; overflow-x: auto; padding: 10px 0; scrollbar-width: none; }
        .related-item { flex: 0 0 140px; background: var(--glass-white); border-radius: 15px; border: 1px solid var(--glass-border); overflow: hidden; cursor: pointer; }
        .related-item img { width: 100%; height: 180px; object-fit: cover; }
        .related-item p { font-size: 11px; padding: 8px; text-align: center; margin: 0; color: ghostwhite; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        .close-modal-btn { width: 100%; background: none; border: 2px solid var(--primary); color: ghostwhite; padding: 15px; cursor: pointer; font-weight: 700; border-radius: 16px; margin-top: 25px; text-transform: uppercase; }

        /* --- ASSISTENTE AJUSTADO (Desktop e Mobile) --- */
        #assistant-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); display: none; z-index: 4000; backdrop-filter: blur(15px); }
        
        #assistant-panel { 
            position: fixed; 
            background: rgba(248, 248, 255, 0.1); /* Vidro semitransparente */
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            z-index: 4001; 
            display: none; /* Começa escondido */
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            transition: 0.5s; 
            opacity: 0;
        }

        /* Layout Desktop */
        @media (min-width: 768px) { 
            #assistant-panel { 
                width: 450px; height: 350px; left: 50%; top: 50%; 
                transform: translate(-50%, -50%) scale(0.9); 
                border-radius: 40px;
            } 
            #assistant-panel.active { display: flex; opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        /* Layout Mobile */
        @media (max-width: 767px) { 
            #assistant-panel { 
                bottom: -100%; left: 0; width: 100%; height: 350px; 
                border-radius: 35px 35px 0 0; 
                display: flex; /* Flex no mobile para a animação de subir */
            } 
            #assistant-panel.active { bottom: 0; opacity: 1; display: flex; } 
        }

        .bars-container { display: flex; gap: 10px; height: 60px; margin-top: 40px; }
        .bar { width: 6px; height: 18px; border-radius: 10px; background: var(--primary); }
        .listening .bar { animation: barWave 0.6s infinite ease-in-out alternate; }
        @keyframes barWave { 0% { height: 12px; } 100% { height: 55px; } }
        
        #loader { display: none; text-align: center; padding: 80px; color: var(--primary); }
    </style>
</head>
<body>


    <script>
  atOptions = {
    'key' : '7ce14ef3a5424c507b8ca46c5971a7bb',
    'format' : 'iframe',
    'height' : 90,
    'width' : 728,
    'params' : {}
  };
</script>
<script src="https://www.highperformanceformat.com/7ce14ef3a5424c507b8ca46c5971a7bb/invoke.js"></script>

    
    <header class="header">
        <a href="../../More_options.html" class="nav-btn" title="Voltar">
            <i class="fas fa-arrow-left"></i>
        </a>
        
        <div class="search-pill">
            <input type="text" id="search-input" placeholder="Pesquisar jogos...">
            <i class="fas fa-microphone" id="mic-trigger" style="color: var(--primary); cursor: pointer; font-size: 20px;"></i>
        </div>
    </header>

    <div id="loader"><i class="fas fa-circle-notch fa-spin fa-3x"></i></div>
    <main class="masonry-container" id="game-grid"></main>

    <div id="assistant-overlay" onclick="closeAssistant()"></div>
    <div id="assistant-panel">
        <div id="assistant-status" style="color: var(--text); font-size:24px; font-weight:700;">Ouvindo...</div>
        <div class="bars-container listening" id="bars-box">
            <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
        </div>
        <button onclick="closeAssistant()" style="margin-top:40px; background:none; border:none; color:var(--primary); cursor:pointer; font-weight:700; font-size: 16px;">CANCELAR</button>
    </div>

    <div id="modal-overlay">
        <div class="modal-content">
            <div class="modal-banner-container">
                <img id="m-img" class="modal-banner">
                <button id="share-trigger" class="action-btn" title="Compartilhar"><i class="fas fa-share-nodes"></i></button>
                <button id="audio-trigger" class="action-btn audio-btn" title="Ouvir"><i class="fas fa-volume-up"></i></button>
            </div>
            
            <div class="modal-body">
                <h2 id="m-title" style="margin:0 0 10px 0; font-family:'Google Sans'; font-size: 28px; color: ghostwhite;"></h2>
                <span class="translation-tag">Traduzido para seu idioma</span>
                <div id="m-desc" style="color:ghostwhite; font-size:16px; line-height:1.8; margin-bottom:30px;"></div>
                
                <div class="actions">
                    <a id="btn-steam" target="_blank" class="btn-game btn-steam"><i class="fab fa-steam"></i> STEAM</a>
                    <a id="btn-xbox" target="_blank" class="btn-game btn-xbox"><i class="fab fa-xbox"></i> XBOX CLOUD</a>
                    <a id="btn-gforce" target="_blank" class="btn-game btn-gforce"><i class="fas fa-bolt"></i> GEFORCE NOW</a>
                </div>

                <div class="related-section" style="margin-top: 30px;">
                    <h3 style="font-size: 18px; margin-bottom: 15px; color: ghostwhite;">Jogos Semelhantes</h3>
                    <div class="related-scroll" id="related-box"></div>
                </div>

                <button onclick="closeModal()" class="close-modal-btn">VOLTAR</button>
            </div>
        </div>
    </div>

    <script>
        const RAWG_KEY = 'c542e67aec3a4340908f9de9e86038af';
        const gameGrid = document.getElementById('game-grid');
        const synth = window.speechSynthesis;
        let currentUtterance = null;
        let currentGameData = null;

        // --- FUNÇÕES DE BUSCA E MODAL ---
        async function fetchGames(q = '') {
            document.getElementById('loader').style.display = 'block';
            gameGrid.innerHTML = '';
            const url = q ? `https://api.rawg.io/api/games?key=${RAWG_KEY}&search=${q}&page_size=20` : `https://api.rawg.io/api/games?key=${RAWG_KEY}&ordering=-added&page_size=25`;
            const res = await fetch(url);
            const data = await res.json();
            data.results.forEach(game => {
                if(!game.background_image) return;
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `<img src="${game.background_image}"><div class="card-name">${game.name}</div>`;
                card.onclick = () => openGame(game);
                gameGrid.appendChild(card);
            });
            document.getElementById('loader').style.display = 'none';
        }

        // Funções auxiliares (translate, audio, share, related, openGame, closeModal) mantidas como no original...
        async function translateText(text) {
            const userLang = navigator.language.split('-')[0] || 'pt';
            const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=${userLang}&dt=t&q=${encodeURIComponent(text)}`;
            try {
                const response = await fetch(url);
                const data = await response.json();
                return data[0].map(item => item[0]).join('');
            } catch { return text; }
        }

        function toggleAudio() {
            const btn = document.getElementById('audio-trigger');
            const text = document.getElementById('m-desc').innerText;
            if (synth.speaking) {
                synth.cancel();
                btn.classList.remove('playing');
                btn.innerHTML = '<i class="fas fa-volume-up"></i>';
                return;
            }
            if (text && text !== "Buscando informações...") {
                currentUtterance = new SpeechSynthesisUtterance(text);
                currentUtterance.lang = navigator.language || 'pt-BR';
                currentUtterance.onstart = () => { btn.classList.add('playing'); btn.innerHTML = '<i class="fas fa-stop"></i>'; };
                currentUtterance.onend = () => { btn.classList.remove('playing'); btn.innerHTML = '<i class="fas fa-volume-up"></i>'; };
                synth.speak(currentUtterance);
            }
        }

        async function shareGame() {
            if (!currentGameData) return;
            const shareData = {
                title: currentGameData.name,
                text: `Dê uma olhada em ${currentGameData.name} no Game Hub!`,
                url: window.location.href
            };
            try {
                if (navigator.share) {
                    await navigator.share(shareData);
                } else {
                    await navigator.clipboard.writeText(`${shareData.text} - ${shareData.url}`);
                    alert("Link copiado!");
                }
            } catch (err) { console.log("Erro:", err); }
        }

        async function fetchRelated(genres) {
            const box = document.getElementById('related-box');
            box.innerHTML = '';
            if(!genres || genres.length === 0) return;
            const res = await fetch(`https://api.rawg.io/api/games?key=${RAWG_KEY}&genres=${genres[0].id}&page_size=10`);
            const data = await res.json();
            data.results.forEach(game => {
                const item = document.createElement('div');
                item.className = 'related-item';
                item.innerHTML = `<img src="${game.background_image}"><p>${game.name}</p>`;
                item.onclick = (e) => { e.stopPropagation(); openGame(game); document.getElementById('modal-overlay').scrollTo(0,0); };
                box.appendChild(item);
            });
        }

        async function openGame(game) {
            currentGameData = game;
            document.getElementById('modal-overlay').style.display = 'block';
            document.body.style.overflow = 'hidden';
            document.getElementById('m-title').innerText = game.name;
            document.getElementById('m-img').src = game.background_image;
            
            const q = encodeURIComponent(game.name);
            document.getElementById('btn-steam').href = `https://store.steampowered.com/search/?term=${q}`;
            document.getElementById('btn-xbox').href = `https://www.xbox.com/pt-BR/play/search?q=${q}`;
            document.getElementById('btn-gforce').href = `https://www.nvidia.com/pt-br/geforce-now/games/?query=${q}`;
            
            document.getElementById('m-desc').innerText = "Buscando informações...";
            document.getElementById('audio-trigger').onclick = toggleAudio;
            document.getElementById('share-trigger').onclick = shareGame;

            try {
                const wikiRes = await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${q.replace(/%20/g, '_')}`);
                const wikiData = await wikiRes.json();
                const translatedText = await translateText(wikiData.extract || "Nenhuma descrição encontrada.");
                document.getElementById('m-desc').innerText = translatedText;
            } catch { document.getElementById('m-desc').innerText = "Erro ao carregar dados."; }

            fetchRelated(game.genres);
        }

        function closeModal() { 
            synth.cancel();
            document.getElementById('modal-overlay').style.display = 'none'; 
            document.body.style.overflow = 'auto'; 
            document.getElementById('audio-trigger').classList.remove('playing');
        }

        // --- LÓGICA DE RECONHECIMENTO DE VOZ ATUALIZADA ---
        const Recognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        if (Recognition) {
            const rec = new Recognition();
            rec.lang = 'pt-BR';
            
            document.getElementById('mic-trigger').onclick = () => {
                const overlay = document.getElementById('assistant-overlay');
                const panel = document.getElementById('assistant-panel');
                
                overlay.style.display = 'block';
                panel.style.display = 'flex'; // Garante display flex para desktop
                setTimeout(() => panel.classList.add('active'), 10);
                
                rec.start();
            };

            rec.onresult = (e) => {
                const text = e.results[0][0].transcript;
                closeAssistant();
                document.getElementById('search-input').value = text;
                fetchGames(text);
            };

            rec.onerror = () => closeAssistant();
            rec.onend = () => {}; 
        }

        function closeAssistant() {
            const overlay = document.getElementById('assistant-overlay');
            const panel = document.getElementById('assistant-panel');
            
            panel.classList.remove('active');
            overlay.style.display = 'none';
            
            // Aguarda o tempo da transição CSS para esconder o display no desktop
            setTimeout(() => {
                if(!panel.classList.contains('active')) panel.style.display = 'none';
            }, 500);
        }

        fetchGames();
    </script>
</body>
</html>

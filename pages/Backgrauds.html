<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galeria BlueViolet | Banco de Backgrounds</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* =============================================================
           ESTILOS CSS: VARI√ÅVEIS, RESET E CORE
           ============================================================= 
        */

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* üé® PALETA DE CORES: DARK MODE + BLUEVIOLET */
            --primary-color: #8a2be2;     /* BlueViolet (cor principal vibrante) */
            --accent-color: #a450e5;      /* Roxo mais claro para hover */
            --bg-color: #120e1a;          /* Fundo dark (roxo bem escuro) */
            --text-color: #e0e0e0;        /* Texto principal (cinza claro) */
            --text-color-muted: #a0a0a0;   /* Texto secund√°rio (cinza) */
            --white: #ffffff;
            
            /* ‚ú® EFEITO DE VIDRO (usado apenas na sidebar) */
            --glass-bg: rgba(255, 255, 255, 0.05); 
            --glass-border: rgba(255, 255, 255, 0.1); 
            --blur-value: 10px;                   

            /* Larguras da Sidebar */
            --sidebar-width-mobile: 280px;
            --sidebar-width-desktop: 280px; 
            
            /* Pinterest-like */
            --pinterest-red: #E60023;
        }

        /* ANIMA√á√ÉO DA BORDA GLOW */
        @keyframes glowing-pinterest {
            0% { box-shadow: 0 0 5px rgba(230, 0, 35, 0.4), 0 0 10px rgba(230, 0, 35, 0.2); }
            50% { box-shadow: 0 0 10px var(--pinterest-red), 0 0 20px rgba(230, 0, 35, 0.6); }
            100% { box-shadow: 0 0 5px rgba(230, 0, 35, 0.4), 0 0 10px rgba(230, 0, 35, 0.2); }
        }

        /* SCROLLBAR PERSONALIZADA */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: var(--bg-color);
        }
        ::-webkit-scrollbar-thumb {
            background-color: var(--primary-color);
            border-radius: 20px;
            border: 2px solid var(--bg-color);
        }
        ::-webkit-scrollbar-thumb:hover {
            background-color: var(--accent-color);
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--bg-color);
            /* Efeito de "aura" no fundo */
            background-image: radial-gradient(circle at 80% 20%, rgba(138, 43, 226, 0.2), transparent 50vmax),
                              radial-gradient(circle at 20% 80%, rgba(138, 43, 226, 0.15), transparent 50vmax);
            background-attachment: fixed;
            color: var(--text-color);
            overflow-x: hidden;
        }

        a{ text-decoration: none; }


        /* ===================================================================
           0. MENU LATERAL (SIDEBAR)
           =================================================================== */
        .sidebar {
            height: 100%;
            width: var(--sidebar-width-mobile); 
            position: fixed;
            z-index: 2000; 
            top: 0;
            left: 0;
            
            /* Efeito de Vidro */
            background-color: var(--glass-bg);
            backdrop-filter: blur(var(--blur-value));
            -webkit-backdrop-filter: blur(var(--blur-value));
            border-right: 1px solid var(--glass-border);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.2);

            transform: translateX(-100%); 
            transition: transform 0.3s ease-in-out;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .sidebar.open {
            transform: translateX(0); 
        }

        .sidebar-header .close-btn {
            display: block; 
            font-size: 2em;
            color: var(--text-color);
            background: none;
            border: none;
            cursor: pointer;
        }
        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid var(--glass-border);
            flex-shrink: 0;
        }
        .sidebar-header .logo {
            color: var(--primary-color);
            font-size: 1.2em;
            font-weight: 700;
        }
        .sidebar-nav { flex-grow: 1; padding: 20px 0; }
        .sidebar-nav ul { list-style: none; }
        .sidebar-nav li a {
            padding: 12px 20px;
            color: var(--text-color-muted);
            display: flex;
            align-items: center;
            gap: 15px;
            transition: background-color 0.2s, color 0.2s;
            margin: 4px 10px;
            border-radius: 5px;
        }

        .sidebar-nav li a:hover, .sidebar-nav li a.active {
            background-color: rgba(138, 43, 226, 0.2);
            color: var(--white);
        }

        .sidebar-footer {
            padding: 15px 20px;
            border-top: 1px solid var(--glass-border);
            font-size: 0.8em;
            color: var(--text-color-muted);
            flex-shrink: 0;
        }

        /* Overlay de Fundo */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7); 
            z-index: 1999; 
            display: none;
            backdrop-filter: blur(2px); 
        }

        #main-content-wrapper { 
            margin-left: 0;
            transition: margin-left 0.3s ease-in-out; 
            min-height: 100vh;
        }


        /* ===================================================================
           1. NAVEGA√á√ÉO SUPERIOR (Top Nav) - Busca
           =================================================================== */
        .top-nav-social {
            position: sticky;
            top: 0;
            width: 100%;
            padding: 10px 15px; 
            z-index: 1000;
            
            background-color: var(--bg-color);
            border-bottom: 1px solid var(--glass-border);
            
            display: flex;
            align-items: center;
            justify-content: flex-start; 
            gap: 10px; 
        }

        .pinterest-logo {
            color: var(--pinterest-red);
            font-size: 1.8em;
            flex-shrink: 0;
            margin-right: 10px;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s;
        }
        
        .menu-icon {
            cursor: pointer;
            padding: 5px;
            background: none;
            border: none;
            display: block; 
            color: var(--text-color);
            flex-shrink: 0;
        }
        
        /* BARRA DE BUSCA CENTRALIZADA */
        .search-bar-container { 
            flex-grow: 1; 
            max-width: 600px; 
            position: relative; 
            display: flex;
            align-items: center;
            
            /* Estilo Base Local */
            background-color: rgba(255, 255, 255, 0.1); 
            border: 2px solid transparent; 
            border-radius: 25px;
            padding: 0 10px;
            transition: all 0.3s ease; 
        }
        
        /* Efeito de Foco/Hover Padr√£o (Local Mode) */
        .search-bar-container:focus-within,
        .search-bar-container:not(.pinterest-active):hover {
             background-color: rgba(255, 255, 255, 0.2);
             box-shadow: 0 0 8px rgba(138, 43, 226, 0.3);
        }
        
        /* Efeito de Borda e Glow no MODO PINTEREST */
        .search-bar-container.pinterest-active {
            background-color: rgba(230, 0, 35, 0.1); 
            border-color: var(--pinterest-red);
            animation: glowing-pinterest 2s infinite alternate;
        }

        #main-search-input {
            width: 100%; 
            padding: 10px 10px; 
            padding-left: 0; 
            border: none;
            border-radius: 20px;
            font-size: 0.9em;
            outline: none;
            background-color: transparent;
            color: var(--text-color);
        }
        
        .search-icon-inside {
            color: var(--text-color-muted); 
            font-size: 1.1em;
            flex-shrink: 0;
        }

        /* L√ìGICA DO TOGGLE */
        .search-toggle-switch-container { 
            position: relative; 
            flex-shrink: 0;
            margin-left: 10px; 
        }
        
        .search-toggle-checkbox { display: none; }
        .search-toggle-label {
            position: relative; display: block; width: 65px; height: 34px; cursor: pointer;
            background-color: var(--primary-color); border-radius: 34px; transition: background-color 0.4s;
            overflow: hidden; 
        }
        .slider {
            position: absolute; content: ""; height: 26px; width: 26px; left: 4px; bottom: 4px;
            background-color: var(--white); transition: 0.4s; box-shadow: 0 0 5px rgba(0, 0, 0, 0.4);
        }
        .slider.round { border-radius: 50%; }
        .search-toggle-checkbox:checked + .search-toggle-label { background-color: var(--pinterest-red); } 
        .search-toggle-checkbox:checked + .search-toggle-label .slider { transform: translateX(31px); }
        .toggle-icon { position: absolute; color: var(--white); font-size: 1.1em; top: 50%; transform: translateY(-50%); transition: opacity 0.4s; }
        .filter-icon { left: 10px; }
        .pinterest-icon { right: 8px; opacity: 0; }
        .search-toggle-checkbox:checked + .search-toggle-label .filter-icon { opacity: 0; }
        .search-toggle-checkbox:checked + .search-toggle-label .pinterest-icon { opacity: 1; }
        .search-mode-indicator { position: absolute; font-size: 0.7em; font-weight: 700; color: var(--white); top: 50%; transform: translateY(-50%); white-space: nowrap; transition: all 0.4s; }
        .filter-mode { left: 38px; opacity: 1; }
        .pinterest-mode { right: 34px; opacity: 0;}
        .search-toggle-checkbox:checked + .search-toggle-label .filter-mode { opacity: 0; }
        .search-toggle-checkbox:checked + .search-toggle-label .pinterest-mode { opacity: 1; right: auto; left: 8px; }


        /* ===================================================================
           2. SE√á√ÉO DE ABAS (Top Tabbars) - TEMA/CATEGORIA
           =================================================================== */
        .content-tabs {
            width: 100%;
            max-width: 1100px; 
            margin: 0 auto;
            display: flex;
            padding: 10px 0;
            z-index: 999;
            top: 60px; 
            position: sticky;
            
            background-color: var(--bg-color);
            border-bottom: 1px solid var(--glass-border);
            
            overflow-x: auto; 
            white-space: nowrap; 
        }
        .content-tabs::-webkit-scrollbar { display: none; }

        .tab-button {
            flex-shrink: 0; 
            background: none;
            border: none;
            color: var(--text-color-muted);
            padding: 10px 15px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 700;
            transition: color 0.3s, border-bottom 0.3s;
            border-bottom: 3px solid transparent; 
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tab-button:hover { color: var(--white); }
        .tab-button.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
        }

        /* ===================================================================
           3. CONTAINER PRINCIPAL E FILTROS DE ORDENA√á√ÉO (BOT√ïES CIRCULARES)
           =================================================================== */
        .social-feed-container {
            max-width: 1100px; 
            margin: 0 auto;
            padding: 20px 10px 40px 10px;
        }

        .topic-filter-container { 
            padding: 10px 0;
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            overflow-x: auto; 
            white-space: nowrap; 
            border-bottom: 1px solid var(--glass-border);
        }

        .topic-filter-container::-webkit-scrollbar { display: none; }

        /* Estilos dos Bot√µes Circulares de Filtro */
        .order-filter-button {
            flex-shrink: 0; 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            
            width: 70px; 
            height: 70px;
            
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-color-muted);
            border: 1px solid var(--glass-border);
            border-radius: 50%; /* Circular */
            cursor: pointer;
            font-size: 0.75em;
            font-weight: 500;
            transition: all 0.2s ease;
            text-align: center;
        }
        
        .order-filter-button i {
            font-size: 1.3em;
            margin-bottom: 4px;
        }

        .order-filter-button:hover:not(.active) {
            background-color: rgba(255, 255, 255, 0.2);
            color: var(--white);
        }

        .order-filter-button.active {
            background-color: var(--primary-color);
            color: var(--white);
            border-color: var(--primary-color);
            font-weight: 700;
            box-shadow: 0 0 15px rgba(138, 43, 226, 0.5); 
        }

        /* ===================================================================
           4. BACKGROUND GRID E CARDS (Estilo Masonry)
           =================================================================== */
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        /* Grid estilo Masonry (Pinterest) */
        .background-grid {
            column-count: 2; 
            column-gap: 10px; 
            padding: 0 10px; 
        }

        .background-card {
            break-inside: avoid; 
            
            background-color: var(--white); 
            border: none; 
            padding: 0; 
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease, opacity 0.3s, transform 0.3s;
            overflow: hidden; 
            cursor: pointer;
            margin-bottom: 10px; 
            width: 100%; 
        }

        /* CLASSE DE OCULTA√á√ÉO PARA FILTRO */
        .background-card.hide {
            display: none;
            opacity: 0;
            transform: scale(0.9);
        }
        
        .background-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .background-card-image-container {
            width: 100%;
            height: auto; 
            overflow: hidden;
        }

        .background-card-image-container img {
            width: 100%;
            height: auto; 
            object-fit: cover; 
            display: block;
            transition: transform 0.3s ease;
        }
        
        .background-card:hover .background-card-image-container img {
            transform: scale(1.01); 
        }
        
        .background-card-content {
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .background-card-content h3 {
            color: #333; 
            font-size: 0.85em;
            margin: 0;
            font-weight: 600; 
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex-grow: 1;
        }

        .download-btn {
            background-color: var(--primary-color);
            color: var(--white);
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.9em;
            transition: background-color 0.2s, transform 0.2s;
            flex-shrink: 0;
            margin-left: 10px;
            cursor: pointer;
        }
        
        .download-btn:hover {
            background-color: var(--accent-color);
            transform: scale(1.1);
        }
        
        .loading-indicator {
            text-align: center;
            padding: 30px;
            font-size: 1.1em;
            color: var(--primary-color);
        }

        /* Bot√£o Carregar Mais */
        #load-more-container { text-align: center; padding: 20px 0 40px 0; }
        .load-more-button {
            background-color: var(--primary-color);
            color: var(--white);
            border: none;
            padding: 12px 25px; 
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(138, 43, 226, 0.4); 
        }

        .load-more-button:hover {
            background-color: var(--accent-color); 
            transform: scale(1.05); 
            box-shadow: 0 6px 20px rgba(138, 43, 226, 0.6);
        }

        /* ===================================================================
           5. MODAL DE PR√â-VISUALIZA√á√ÉO (FULLSCREEN)
           =================================================================== */

        .modal-fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 3000; 
            display: none; 
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            
            background-color: rgba(18, 14, 26, 0.95); 
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            overflow-y: auto; 
            overflow-x: hidden; 
        }

        .modal-fullscreen.open {
            display: block;
            opacity: 1;
        }

        .background-preview-modal .modal-content-wrapper {
            background: none; 
            padding: 0;
            width: 100%;
            min-height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        #modal-preview-image {
            max-width: 100%;
            max-height: 100vh;
            object-fit: contain; 
        }
        
        .preview-controls {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 3002;
            padding: 15px 25px;
            background: rgba(18, 14, 26, 0.9);
            border: 1px solid var(--primary-color);
            border-radius: 30px;
            display: flex;
            gap: 20px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
        }
        
        .preview-controls button {
            background: var(--primary-color);
            color: var(--white);
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.2s;
        }
        
        .preview-controls button:hover {
            background: var(--accent-color);
        }

        .modal-close-btn {
            position: fixed; 
            top: 20px;
            right: 25px;
            font-size: 2.5em;
            color: var(--text-color);
            background: rgba(18, 14, 26, 0.7); 
            border: none;
            cursor: pointer;
            line-height: 1;
            font-weight: 300;
            border-radius: 50%;
            padding: 0 8px 4px 8px;
            z-index: 3001;
            display: none; 
        }

        .modal-close-btn:hover {
            color: var(--primary-color);
        }

        /* ===================================================================
           6. MEDIA QUERY PARA DESKTOP
           =================================================================== */
        @media (min-width: 1024px) {
            
            /* Sidebar e Conte√∫do Principal */
            .sidebar {
                width: var(--sidebar-width-desktop); 
                transform: translateX(0);
            }
            #main-content-wrapper {
                margin-left: var(--sidebar-width-desktop); 
                width: calc(100% - var(--sidebar-width-desktop)); 
                min-height: 100vh;
            }
            .menu-icon { display: none; }

            /* Centraliza√ß√£o e Limites do Feed */
            .social-feed-container,
            .top-nav-social,
            .content-tabs {
                max-width: 1100px; 
            }
            
            /* Ajusta Top Nav para alinhar a busca no Desktop */
            .top-nav-social {
                 justify-content: center;
            }
             .search-bar-container {
                 max-width: 700px;
             }
             
            /* Grid de Backgrounds (Masonry) */
            .background-grid {
                column-count: 3; 
            }
            
            .social-feed-container {
                padding-left: 20px;
                padding-right: 20px;
            }
        }
    </style>
</head>
<body>

<aside id="sidebar" class="sidebar">
    <div class="sidebar-header">
        <span class="logo">FanWiki</span>
        <button class="close-btn" onclick="toggleSidebar()"><i class="fas fa-times"></i></button>
    </div>
    <nav class="sidebar-nav">
        <ul>
            <li><a href="../Home.html" class="active"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="./Abaut.html"><i class="fas fa-info-circle"></i> Informa√ß√µes</a></li>
        </ul>
    </nav>
    <div class="sidebar-footer">
        ¬© FanWiki
    </div>
</aside>

<div id="overlay" class="overlay"></div>

<div id="main-content-wrapper">
    
    <header class="top-nav-social" id="top-nav-social">
        <button class="menu-icon" onclick="toggleSidebar()">
            <i class="fas fa-bars"></i>
        </button>
        
        <i class="fab fa-pinterest-p pinterest-logo" id="pinterest-logo"></i> 

        <div class="search-bar-container" id="search-bar-container">
            <i class="fas fa-search search-icon-inside"></i>
            <input type="text" id="main-search-input" placeholder="Buscar por tags, cor ou artista...">
            
            <div class="search-toggle-switch-container">
                <input type="checkbox" id="search-toggle" class="search-toggle-checkbox">
                <label for="search-toggle" class="search-toggle-label">
                    <span class="slider round"></span>
                    <i class="fas fa-filter toggle-icon filter-icon"></i>
                    <i class="fab fa-pinterest-p toggle-icon pinterest-icon"></i> 
                    <span class="search-mode-indicator filter-mode">Local</span>
                    <span class="search-mode-indicator pinterest-mode" style="opacity:0;">Pinterest</span>
                </label>
            </div>
            
        </div>
        
    </header>

    <nav class="content-tabs">
        <button class="tab-button active" data-tab-target="#tab-alls"><i class="fas fa-list-ul"></i> Alls</button>
        <button class="tab-button" data-tab-target="#tab-arte-digital"><i class="fas fa-paint-brush"></i> Arte Digital</button>
        <button class="tab-button" data-tab-target="#tab-animada"><i class="fas fa-bolt"></i> Animada</button>
        <button class="tab-button" data-tab-target="#tab-abstrato"><i class="fas fa-cube"></i> Abstrato 3D</button>
        <button class="tab-button" data-tab-target="#tab-paisagens"><i class="fas fa-mountain"></i> Paisagens</button>
        <button class="tab-button" data-tab-target="#tab-realista"><i class="fas fa-camera"></i> Realista</button>
    </nav>
    
    <main class="social-feed-container">
        
        <div class="topic-filter-container"> 
            <button class="order-filter-button active" data-order-by="recent"><i class="fas fa-sync-alt"></i> Recentes</button>
            <button class="order-filter-button" data-order-by="popular"><i class="fas fa-fire"></i> Populares</button>
            <button class="order-filter-button" data-order-by="premium"><i class="fas fa-gem"></i> Premium</button>
            <button class="order-filter-button" data-order-by="downloads"><i class="fas fa-download"></i> Baixados</button>
        </div>
        
        <div id="tab-alls" class="tab-content active">
            
            <section class="background-grid" id="background-list-alls">
                <article class="background-card" onclick="openPreviewModal(this)" data-tags="ArteDigital,Abstrato,Minimalista" data-recent="6" data-popular="100" data-downloads="50">
                    <div class="background-card-image-container">
                        <img src="https://picsum.photos/seed/bg1/300/450" data-hires-src="https://picsum.photos/seed/bg1/1920/2880" alt="Abstrato Roxo Vazio">
                    </div>
                    <div class="background-card-content"><h3>Abstrato Roxo Vazio</h3><div class="download-btn" onclick="downloadBackgroundFromCard(event, 'https://picsum.photos/seed/bg1/1920/2880')"><i class="fas fa-download"></i></div></div>
                </article>
                
                <article class="background-card" onclick="openPreviewModal(this)" data-tags="ArteDigital,Paisagens,SciFi" data-recent="4" data-popular="500" data-downloads="120">
                    <div class="background-card-image-container">
                        <img src="https://picsum.photos/seed/bg2/300/250" data-hires-src="https://picsum.photos/seed/bg2/1920/1600" alt="Via L√°ctea Blue">
                    </div>
                    <div class="background-card-content"><h3>Via L√°ctea Blue</h3><div class="download-btn" onclick="downloadBackgroundFromCard(event, 'https://picsum.photos/seed/bg2/1920/1600')"><i class="fas fa-download"></i></div></div>
                </article>
                
                <article class="background-card" onclick="openPreviewModal(this)" data-tags="Abstrato,Realista,Neon" data-recent="1" data-popular="900" data-downloads="20">
                    <div class="background-card-image-container">
                        <img src="https://picsum.photos/seed/bg3/300/350" data-hires-src="https://picsum.photos/seed/bg3/1920/2240" alt="Ondas Digitais">
                    </div>
                    <div class="background-card-content"><h3>Ondas Digitais</h3><div class="download-btn" onclick="downloadBackgroundFromCard(event, 'https://picsum.photos/seed/bg3/1920/2240')"><i class="fas fa-download"></i></div></div>
                </article>
                
                <article class="background-card" onclick="openPreviewModal(this)" data-tags="Paisagens,Realista" data-recent="5" data-popular="200" data-downloads="80">
                    <div class="background-card-image-container">
                        <img src="https://picsum.photos/seed/bg4/300/400" data-hires-src="https://picsum.photos/seed/bg4/1920/2560" alt="Montanha Nevoada">
                    </div>
                    <div class="background-card-content"><h3>Montanha Nevoada</h3><div class="download-btn" onclick="downloadBackgroundFromCard(event, 'https://picsum.photos/seed/bg4/1920/2560')"><i class="fas fa-download"></i></div></div>
                </article>
                
                <article class="background-card" onclick="openPreviewModal(this)" data-tags="ArteDigital,Abstrato,Neon" data-recent="3" data-popular="800" data-downloads="150">
                    <div class="background-card-image-container">
                        <img src="https://picsum.photos/seed/bg5/300/280" data-hires-src="https://picsum.photos/seed/bg5/1920/1792" alt="Gato BlueViolet">
                    </div>
                    <div class="background-card-content"><h3>Gato BlueViolet</h3><div class="download-btn" onclick="downloadBackgroundFromCard(event, 'https://picsum.photos/seed/bg5/1920/1792')"><i class="fas fa-download"></i></div></div>
                </article>
                
                <article class="background-card" onclick="openPreviewModal(this)" data-tags="Abstrato" data-recent="2" data-popular="350" data-downloads="10">
                    <div class="background-card-image-container">
                        <img src="https://picsum.photos/seed/bg6/300/320" data-hires-src="https://picsum.photos/seed/bg6/1920/2048" alt="M√°rmore Gal√°ctico">
                    </div>
                    <div class="background-card-content"><h3>M√°rmore Gal√°ctico</h3><div class="download-btn" onclick="downloadBackgroundFromCard(event, 'https://picsum.photos/seed/bg6/1920/2048')"><i class="fas fa-download"></i></div></div>
                </article>
                
            </section>
            
            <div id="load-more-container">
                <button class="load-more-button">
                    Carregar Mais Fundos <i class="fas fa-sync-alt"></i>
                </button>
            </div>
            
        </div>
        
        <div id="tab-arte-digital" class="tab-content">
            <div class="loading-indicator">
                <i class="fas fa-paint-brush"></i> Conte√∫do filtrado: Arte Digital...
            </div>
        </div>
        
        <div id="tab-animada" class="tab-content">
            <div class="loading-indicator">
                <i class="fas fa-bolt"></i> Conte√∫do filtrado: Animada...
            </div>
        </div>

        <div id="tab-abstrato" class="tab-content">
            <div class="loading-indicator">
                <i class="fas fa-cube"></i> Conte√∫do filtrado: Abstrato 3D...
            </div>
        </div>
        
        <div id="tab-paisagens" class="tab-content">
            <div class="loading-indicator">
                <i class="fas fa-mountain"></i> Conte√∫do filtrado: Paisagens...
            </div>
        </div>
        
        <div id="tab-realista" class="tab-content">
            <div class="loading-indicator">
                <i class="fas fa-camera"></i> Conte√∫do filtrado: Realista...
            </div>
        </div>
        
    </main>
    
</div>

<div id="background-preview-modal" class="modal-fullscreen background-preview-modal">
    <div class="modal-content-wrapper">
        <img id="modal-preview-image" src="" alt="Pr√©-visualiza√ß√£o do Background">
        
        <div class="preview-controls">
            <button onclick="downloadBackground()"><i class="fas fa-file-download"></i> Download Original</button>
            <button onclick="closePreviewModal()"><i class="fas fa-times-circle"></i> Fechar Pr√©via</button>
        </div>
        
    </div>
</div>
<button class="modal-close-btn" id="modal-fixed-close-btn" onclick="closePreviewModal()">
    <i class="fas fa-times"></i>
</button>

<script>
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const previewModal = document.getElementById('background-preview-modal');
    const modalImage = document.getElementById('modal-preview-image');
    const modalFixedCloseBtn = document.getElementById('modal-fixed-close-btn');
    const searchInput = document.getElementById('main-search-input');
    const searchToggle = document.getElementById('search-toggle');
    
    // NOVOS/ATUALIZADOS ELEMENTOS
    const orderFilterButtons = document.querySelectorAll('.order-filter-button'); // Bot√µes circulares de ordena√ß√£o
    const backgroundListAlls = document.getElementById('background-list-alls'); // Grid de cards
    
    // Pinterest UI Elements
    const pinterestLogo = document.getElementById('pinterest-logo');
    const searchBarContainer = document.getElementById('search-bar-container');

    let currentBackgroundUrl = ''; 
    let activeCategory = 'Alls'; // Vari√°vel para a categoria/aba ativa
    let activeOrder = 'recent';   // Vari√°vel para a ordena√ß√£o ativa

    document.body.style.overflow = 'auto'; 

    // --- L√≥gica da Sidebar ---
    function toggleSidebar() {
        const isMobile = window.innerWidth < 1024;
        
        if (sidebar.classList.contains('open')) {
            sidebar.classList.remove('open');
            if (isMobile) {
                overlay.style.display = 'none';
            }
        } else {
            sidebar.classList.add('open');
            if (isMobile) {
                overlay.style.display = 'block';
            }
        }
    }
    window.addEventListener('resize', () => {
        if (window.innerWidth >= 1024) {
            sidebar.classList.remove('open');
            overlay.style.display = 'none';
        }
    });
    overlay.addEventListener('click', toggleSidebar);

    // --- L√≥gica das Top Tabbars (Categorias) ---
    document.querySelectorAll('.content-tabs .tab-button').forEach(button => {
        button.addEventListener('click', function() {
            // Remove 'active' das abas e conte√∫dos
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // Adiciona 'active' √† aba e conte√∫do clicados
            this.classList.add('active');
            const targetId = this.getAttribute('data-tab-target');
            const targetContent = document.querySelector(targetId);
            if (targetContent) {
                targetContent.classList.add('active');
            }
            
            // ATUALIZA A VARI√ÅVEL DE CATEGORIA
            // Remove o prefixo '#tab-' e capitaliza a primeira letra (Alls, ArteDigital, Animada, etc.)
            let rawCategory = targetId.substring(5).replace(/-/g, ' '); 
            rawCategory = rawCategory.replace(/(^\w|\s\w)/g, m => m.toUpperCase()).replace(/\s/g, '');
            
            activeCategory = rawCategory; 
            
            // Se a aba for "Alls", faz a ordena√ß√£o. Se for outra, exibe o conte√∫do simples
            if (activeCategory === 'Alls') {
                applyFilterAndSort(); 
            } else {
                // Ao mudar de categoria, o modo local n√£o tem filtro de busca aplicado
            }
        });
    });

    // --- L√≥gica dos Bot√µes de Ordena√ß√£o (Filtros Circulares) ---
    orderFilterButtons.forEach(button => {
        button.addEventListener('click', function() {
            // Remove a classe 'active' de todos os bot√µes de filtro
            orderFilterButtons.forEach(btn => btn.classList.remove('active'));
            
            // Adiciona 'active' ao bot√£o clicado
            this.classList.add('active');
            
            // ATUALIZA A VARI√ÅVEL DE ORDENA√á√ÉO E FILTRA/ORDENA
            activeOrder = this.getAttribute('data-order-by');
            
            // Aplica a ordena√ß√£o apenas se a aba "Alls" estiver ativa
            if (document.querySelector('#tab-alls').classList.contains('active')) {
                applyFilterAndSort();
            }
        });
    });

    // --- FUN√á√ÉO CENTRAL DE FILTRAGEM/ORDENA√á√ÉO ---
    function applyFilterAndSort() {
        // Ignora a ordena√ß√£o se o modo Pinterest estiver ativo
        if (searchToggle.checked) return; 
        
        // 1. FILTRAGEM (por busca no input)
        const searchQuery = searchInput.value.trim().toUpperCase();
        const cards = Array.from(backgroundListAlls.querySelectorAll('.background-card'));
        
        cards.forEach(card => {
            const cardTags = (card.getAttribute('data-tags') || '').toUpperCase();
            const cardTitle = card.querySelector('h3').textContent.toUpperCase();
            
            const passesSearchFilter = searchQuery.length === 0 || 
                                       cardTitle.includes(searchQuery) ||
                                       cardTags.includes(searchQuery);
            
            if (passesSearchFilter) {
                card.classList.remove('hide');
            } else {
                card.classList.add('hide');
            }
        });

        // 2. ORDENA√á√ÉO (apenas nos cards vis√≠veis e na aba "Alls")
        if (activeCategory === 'Alls') {
            const visibleCards = cards.filter(card => !card.classList.contains('hide'));

            let sortKey = '';
            if (activeOrder === 'recent') {
                sortKey = 'data-recent';
            } else if (activeOrder === 'popular') {
                sortKey = 'data-popular';
            } else if (activeOrder === 'downloads') {
                sortKey = 'data-downloads';
            } 

            if (sortKey) {
                 visibleCards.sort((a, b) => {
                    const valA = parseInt(a.getAttribute(sortKey) || 0);
                    const valB = parseInt(b.getAttribute(sortKey) || 0);
                    // Ordena√ß√£o descendente
                    return valB - valA; 
                });

                // Reinsere os cards ordenados no DOM
                visibleCards.forEach(card => backgroundListAlls.appendChild(card));
            }
        }
    }

    // A. Evento de input para a busca local em tempo real
    searchInput.addEventListener('input', function() {
        if (!searchToggle.checked) {
            applyFilterAndSort(); 
        }
    });

    // --- L√≥gica: Altern√¢ncia de Modo de Busca (Filtro vs. Pinterest) ---

    function updatePinterestUI(isPinterestMode) {
        if (isPinterestMode) {
            searchBarContainer.classList.add('pinterest-active');
            pinterestLogo.style.opacity = '1';
            pinterestLogo.style.visibility = 'visible';
        } else {
            searchBarContainer.classList.remove('pinterest-active');
            pinterestLogo.style.opacity = '0';
            pinterestLogo.style.visibility = 'hidden';
        }
    }

    function handleSearch() {
        const query = searchInput.value.trim();
        const isPinterestMode = searchToggle.checked;

        if (!query) {
            if (!isPinterestMode) applyFilterAndSort(); 
            return;
        }

        if (isPinterestMode) {
            // =========================================================
            // L√ìGICA DE BUSCA NO PINTEREST COM OS FILTROS LOCAIS
            // =========================================================
            const pinterestBaseUrl = 'https://www.pinterest.com/search/pins/?q=';
            let searchKeywords = [query, 'background']; 
            
            // 1. Adicionar a Categoria Ativa (se n√£o for "Alls")
            if (activeCategory && activeCategory.toLowerCase() !== 'alls') {
                // Insere a categoria na frente do termo de busca
                searchKeywords.unshift(activeCategory); 
            }

            // 2. Adicionar o Filtro de Ordena√ß√£o Ativo
            // Mapeia o termo do filtro de ordena√ß√£o para uma palavra-chave de busca
            let orderKeyword = '';
            if (activeOrder === 'popular') {
                orderKeyword = 'popular';
            } else if (activeOrder === 'recent') {
                orderKeyword = 'latest'; // 'Latest' ou 'new' funciona melhor no Pinterest do que 'recent'
            } else if (activeOrder === 'premium') {
                orderKeyword = 'high quality';
            } else if (activeOrder === 'downloads') {
                orderKeyword = 'trending';
            }
            
            if (orderKeyword) {
                searchKeywords.push(orderKeyword);
            }

            // Constr√≥i a consulta final com as palavras-chave combinadas
            const finalQuery = searchKeywords.join(' ');
            const searchUrl = pinterestBaseUrl + encodeURIComponent(finalQuery); 
            
            console.log("Pinterest Search URL:", searchUrl); // Para debug
            window.open(searchUrl, '_blank'); 
            
        } else {
            // Modo Local: Executa a filtragem local
            applyFilterAndSort();
        }
    }
    // FIM DA FUN√á√ÉO handleSearch()
    // =========================================================


    // A. L√≥gica de Busca ao apertar ENTER
    searchInput.addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
            event.preventDefault(); 
            handleSearch();
        }
    });

    // B. L√≥gica do Toggle (mudar o modo de busca)
    searchToggle.addEventListener('change', function() {
        const isChecked = this.checked;
        
        updatePinterestUI(isChecked); 
        
        if (!isChecked) {
             // Se mudar para o modo Local, executa o filtro/ordena√ß√£o local
             applyFilterAndSort();
        } else {
             // Se mudar para o modo Pinterest, limpa o filtro visual para mostrar tudo
             document.querySelectorAll('.background-card').forEach(card => card.classList.remove('hide'));
        }
    });

    // --- L√≥gica do Modal de Pr√©-visualiza√ß√£o e Download (N√£o alterada) ---

    function openPreviewModal(card) {
        const cardImage = card.querySelector('img');
        const hiresUrl = cardImage ? cardImage.getAttribute('data-hires-src') : null; 
        const imageAlt = cardImage ? cardImage.alt : 'Pr√©-visualiza√ß√£o';
        
        if (!hiresUrl) return; 

        currentBackgroundUrl = hiresUrl; 
        
        modalImage.src = hiresUrl;
        modalImage.alt = imageAlt;
        
        previewModal.classList.add('open');
        modalFixedCloseBtn.style.display = 'block';
        document.body.style.overflow = 'hidden'; 
    }

    function closePreviewModal() {
        previewModal.classList.remove('open');
        modalFixedCloseBtn.style.display = 'none';
        
        document.body.style.overflow = 'auto'; 
        currentBackgroundUrl = '';
        modalImage.src = ''; 
    }
    
    previewModal.addEventListener('click', function(event) {
        if (event.target.id === 'background-preview-modal') {
            closePreviewModal();
        }
    });

    function downloadBackground() {
        if (currentBackgroundUrl) {
            alert(`Simulando download do background: ${modalImage.alt}. \nURL: ${currentBackgroundUrl}`);
        } else {
            alert("Erro: Nenhuma imagem para baixar.");
        }
    }
    
    function downloadBackgroundFromCard(event, url) {
        event.stopPropagation();
        const card = event.currentTarget.closest('.background-card');
        const altText = card.querySelector('h3').textContent;
        
        alert(`Download r√°pido iniciado para: ${altText}. \nURL: ${url}`);
    }
    
    // Inicia a galeria: Aplica a ordena√ß√£o inicial ("recent") na aba "Alls" e garante o estado inicial da UI
    applyFilterAndSort();
    updatePinterestUI(false);
</script>

</body>
</html>

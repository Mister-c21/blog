:root {
    --bg-color: #121212;
    --canvas-bg: #e5e5e5; /* Fundo fora do canvas */
    --panel-bg: rgba(20, 20, 23, 0.75);
    --panel-border: rgba(255, 255, 255, 0.1);
    --accent: #7b61ff; /* Cor destaque */
    --accent-hover: #674cec;
    --text: #ffffff;
    --text-muted: #a0a0a0;
    --danger: #ff4b4b;
    --shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
    --font-main: 'Inter', sans-serif;
}

* { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; font-family: var(--font-main); }
body { margin: 0; background-color: var(--bg-color); height: 100vh; width: 100vw; overflow: hidden; color: var(--text); }

/* --- Layout de Canvas e Zoom --- */
#canvas-container {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    overflow: hidden; 
    background-color: #1a1a1a;
    background-image: radial-gradient(#2a2a2a 1px, transparent 1px);
    background-size: 20px 20px;
    z-index: 1;
    touch-action: none; /* Impede gestos nativos do browser */
    cursor: default;
}

#canvas-wrapper {
    /* O wrapper não é mais usado para transformações; o display-canvas é o que se move */
    position: absolute; top: 0; left: 0;
    transform-origin: 0 0; 
    box-shadow: 0 0 50px rgba(0,0,0,0.6);
}

canvas { 
    display: block; 
    background: #fff; 
    cursor: none; 
    /* MODIFICAÇÃO CHAVE: Renderização de Pixel Nítido */
    image-rendering: pixelated; 
    image-rendering: crisp-edges;
}

/* Cursor Customizado */
#cursor-preview {
    position: fixed; pointer-events: none; 
    /* MODIFICAÇÃO: Cursor quadrado para Pixel Art */
    border: 1px solid rgba(255,255,255,0.8);
    background-color: rgba(255,255,255,0.3); /* Torna o cursor sólido */
    border-radius: 0; 
    transform: translate(-50%, -50%); 
    z-index: 9999; display: none;
    box-shadow: 0 0 4px rgba(0,0,0,0.5); 
}

/* Indicador de Zoom */
.zoom-indicator {
    background: rgba(0,0,0,0.5); padding: 4px 10px; border-radius: 20px;
    font-size: 0.8rem; color: #fff; font-weight: 600;
    border: 1px solid var(--panel-border); cursor: pointer;
}

/* --- Glass Panels (UI) --- */
.glass-panel {
    background: var(--panel-bg); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
    border: 1px solid var(--panel-border); border-radius: 16px; box-shadow: var(--shadow);
    color: var(--text); z-index: 100;
}

/* Header */
.top-dock {
    position: fixed; top: 15px; left: 50%; transform: translateX(-50%);
    width: 95%; max-width: 1200px; height: 56px;
    display: flex; justify-content: space-between; align-items: center; padding: 0 20px;
}
.top-group { display: flex; align-items: center; gap: 12px; }

/* AJUSTE: O .logo agora contém o link */
.logo { 
    font-weight: 700; 
    font-size: 1.1rem; 
    margin-right: 0px; 
    display: flex; 
    align-items: center; 
    gap: 8px; 
}
.gradient-text { background: linear-gradient(135deg, #fff, var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

/* Botões */
.icon-btn, .dock-btn {
    background: transparent; border: none; color: var(--text); font-size: 1.1rem;
    padding: 8px; border-radius: 8px; cursor: pointer; transition: 0.2s; 
    display: flex; justify-content: center; align-items: center;
    /* Adição para a tag <a> atuar como botão */
    text-decoration: none; 
}
.icon-btn:hover { background: rgba(255,255,255,0.1); }
.icon-btn.accent { color: var(--accent); background: rgba(123, 97, 255, 0.15); }
.icon-btn.accent:hover { background: rgba(123, 97, 255, 0.3); }

/* Bottom Dock */
.bottom-dock {
    position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%);
    display: flex; gap: 20px; align-items: center; padding: 10px 25px; height: 65px;
}
.dock-btn { font-size: 1.3rem; width: 45px; height: 45px; }
.dock-btn.active { background: var(--accent); color: #fff; box-shadow: 0 0 15px rgba(123, 97, 255, 0.4); }
.divider { width: 1px; height: 30px; background: rgba(255,255,255,0.2); }
input[type="color"] { width: 35px; height: 35px; border: none; background: none; cursor: pointer; border-radius: 50%; }

/* --- Side Panels (Direita) --- */
.side-panel {
    position: fixed; top: 85px; right: 20px; width: 300px; max-height: calc(100vh - 180px);
    padding: 0; display: flex; flex-direction: column;
    transform: translateX(120%); transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
    visibility: hidden;
}
.side-panel.open { transform: translateX(0); visibility: visible; }

.panel-header { padding: 15px; border-bottom: 1px solid var(--panel-border); display: flex; justify-content: space-between; align-items: center; }
.panel-header h3 { margin: 0; font-size: 0.9rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; }
.panel-group { padding: 15px; overflow-y: auto; }

/* Inputs e Sliders */
.control-group { margin-bottom: 15px; }
.control-group label { display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 8px; color: var(--text-muted); }
input[type="range"] { width: 100%; height: 4px; background: rgba(255,255,255,0.2); border-radius: 2px; -webkit-appearance: none; outline: none; }
input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 16px; height: 16px; background: var(--text); border-radius: 50%; cursor: pointer; margin-top: -6px; box-shadow: 0 0 5px rgba(0,0,0,0.5); }
input[type="range"]::-webkit-slider-runnable-track { width: 100%; height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; }

/* Grid Buttons */
.grid-buttons { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }
.brush-btn, .shape-btn, .filter-btn { background: rgba(255,255,255,0.05); border: 1px solid transparent; color: var(--text-muted); padding: 12px; border-radius: 8px; cursor: pointer; transition: 0.2s; }
.brush-btn:hover, .shape-btn:hover { background: rgba(255,255,255,0.1); }
.brush-btn[disabled], .filter-btn[disabled] { opacity: 0.5; cursor: default; }
.brush-btn.active, .shape-btn.active { background: var(--accent); color: #fff; border-color: rgba(255,255,255,0.2); }

/* --- Lista de Camadas --- */
#layers-list-container { flex: 1; overflow-y: auto; padding: 10px; min-height: 200px; max-height: 300px; }
.layer-item {
    background: rgba(255,255,255,0.03); border: 1px solid transparent;
    padding: 8px; margin-bottom: 6px; border-radius: 8px;
    display: flex; align-items: center; cursor: pointer; transition: 0.2s;
}
.layer-item:hover { background: rgba(255,255,255,0.06); }
.layer-item.active { background: rgba(123, 97, 255, 0.2); border-color: var(--accent); }
.layer-preview {
    width: 36px; height: 36px; border-radius: 4px; margin-right: 10px;
    border: 1px solid var(--panel-border); background-color: #fff;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    /* Garante que o preview da camada seja pixelado */
    image-rendering: pixelated; 
    image-rendering: crisp-edges;
}
.layer-info { flex: 1; font-size: 0.85rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.layer-btn { background: none; border: none; color: var(--text-muted); padding: 6px; cursor: pointer; }
.layer-btn:hover { color: #fff; }

.layer-actions-row { display: flex; gap: 8px; margin-top: 10px; justify-content: space-between; }
.layer-actions-row button { flex: 1; background: rgba(255,255,255,0.05); border: none; color: var(--text); padding: 8px; border-radius: 6px; cursor: pointer; }
.layer-actions-row button:hover { background: rgba(255,255,255,0.1); }
.layer-actions-row button.danger:hover { background: rgba(255, 75, 75, 0.2); color: var(--danger); }

/* Full Width Buttons */
.full-btn {
    width: 100%; padding: 12px; margin-bottom: 8px; border: none; border-radius: 8px;
    background: rgba(255,255,255,0.08); color: white; cursor: pointer;
    text-align: left; display: flex; gap: 12px; align-items: center; font-size: 0.9rem;
}
.full-btn:hover { background: rgba(255,255,255,0.12); }
.full-btn.danger { color: var(--danger); background: rgba(255, 75, 75, 0.1); justify-content: center; }

/* Custom Scrollbar */
.custom-scroll::-webkit-scrollbar { width: 5px; }
.custom-scroll::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 10px; }

/* Mobile Response */
@media (max-width: 768px) {
    .side-panel { width: 100%; bottom: 0; right: 0; top: auto; border-radius: 20px 20px 0 0; transform: translateY(110%); max-height: 60vh; }
    .side-panel.open { transform: translateY(0); }
    .bottom-dock { width: 92%; bottom: 15px; padding: 5px; height: 60px; }
    .top-dock { width: 100%; top: 0; border-radius: 0 0 20px 20px; }
    .zoom-indicator { position: absolute; top: 70px; left: 50%; transform: translateX(-50%); }
    
    /* MODIFICAÇÃO: Garante que o painel de ações possa ser rolado no mobile */
    #actions-panel .panel-group {
        max-height: 40vh; 
    }
             }

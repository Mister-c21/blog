<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FanWiki| Banco de Mídia Musical</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* ===================================================================
           ESTILOS GLOBAIS E VARIÁVEIS
           =================================================================== */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary-color: #8a2be2; --accent-color: #a450e5; --bg-color: #120e1a;
            --card-bg-color: #f7f7f7; --text-color: #e0e0e0; --text-color-dark: #333;
            --text-color-muted: #a0a0a0; --white: #ffffff;
            --youtube-color: #FF0000; --spotify-color: #1DB954;
            --web-accent-color: var(--youtube-color);
            --glass-bg: rgba(255, 255, 255, 0.05); 
            --glass-border: rgba(255, 255, 255, 0.1); --blur-value: 10px;                   
        }
        
        @keyframes glowing-web {
            0% { box-shadow: 0 0 5px var(--web-accent-color), 0 0 10px rgba(0, 0, 0, 0.2); }
            50% { box-shadow: 0 0 10px var(--web-accent-color), 0 0 20px rgba(0, 0, 0, 0.6); }
            100% { box-shadow: 0 0 5px var(--web-accent-color), 0 0 10px rgba(0, 0, 0, 0.2); }
        }
        
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-color); }
        ::-webkit-scrollbar-thumb { background-color: var(--primary-color); border-radius: 20px; border: 2px solid var(--bg-color); }
        ::-webkit-scrollbar-thumb:hover { background-color: var(--accent-color); }

        body {
            font-family: 'Montserrat', sans-serif; background-color: var(--bg-color);
            background-image: radial-gradient(circle at 80% 20%, rgba(138, 43, 226, 0.2), transparent 50vmax),
                              radial-gradient(circle at 20% 80%, rgba(138, 43, 226, 0.15), transparent 50vmax);
            background-attachment: fixed; color: var(--text-color); overflow-x: hidden;
        }

        a{ text-decoration: none; }

        /* ===================================================================
           ESTILOS DA SIDEBAR E FOOTER FIXO
           =================================================================== */
        .sidebar { 
            height: 100%; width: 280px; position: fixed; z-index: 2000; top: 0; left: 0; 
            background-color: var(--glass-bg); backdrop-filter: blur(var(--blur-value)); 
            -webkit-backdrop-filter: blur(var(--blur-value)); border-right: 1px solid var(--glass-border); 
            transform: translateX(-100%); transition: transform 0.3s ease-in-out; 
            display: flex; flex-direction: column; overflow-y: auto; 
        }
        .sidebar.open { transform: translateX(0); }
        .sidebar-header { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; border-bottom: 1px solid var(--glass-border); flex-shrink: 0; }
        .sidebar-header .logo { color: var(--primary-color); font-size: 1.2em; font-weight: 700; }
        .sidebar-header .close-btn { display: block; font-size: 2em; color: var(--text-color); background: none; border: none; cursor: pointer; }
        
        .sidebar-nav { flex-grow: 1; overflow-y: auto; }
        .sidebar-nav ul { list-style: none; padding: 20px 0; }
        .sidebar-nav li a { padding: 12px 20px; color: var(--text-color-muted); display: flex; align-items: center; gap: 15px; transition: background-color 0.2s, color 0.2s; margin: 4px 10px; border-radius: 5px; }
        .sidebar-nav li a:hover, .sidebar-nav li a.active { background-color: rgba(138, 43, 226, 0.2); color: var(--white); }
        
        .sidebar-footer { padding: 15px 20px; margin-top: auto; border-top: 1px solid var(--glass-border); text-align: center; color: var(--text-color-muted); font-size: 0.8em; flex-shrink: 0; }
        
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 1999; display: none; backdrop-filter: blur(2px); }
        #main-content-wrapper { margin-left: 0; transition: margin-left 0.3s ease-in-out; min-height: 100vh; }
        
        /* Header e Navegação */
        .header-content { position: sticky; top: 0; width: 100%; z-index: 1000; background-color: var(--bg-color); border-bottom: 1px solid var(--glass-border); display: flex; flex-direction: column; align-items: center; }
        .top-nav-social { width: 100%; max-width: 1100px; padding: 10px 15px; display: flex; align-items: center; justify-content: flex-start; gap: 10px; }
        .web-logo { font-size: 1.8em; flex-shrink: 0; margin-right: 10px; cursor: pointer; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s; }
        .web-logo.spotify { color: var(--spotify-color); }
        .web-logo.youtube { color: var(--youtube-color); }
        .menu-icon { cursor: pointer; padding: 5px; background: none; border: none; display: block; color: var(--text-color); flex-shrink: 0; }
        .search-bar-container { flex-grow: 1; max-width: 600px; position: relative; display: flex; align-items: center; background-color: rgba(255, 255, 255, 0.1); border: 2px solid transparent; border-radius: 25px; padding: 0 10px; transition: all 0.3s ease; }
        .search-bar-container.web-active { border-color: var(--web-accent-color); animation: glowing-web 2s infinite alternate; }
        #main-search-input { width: 100%; padding: 10px 10px; padding-left: 0; border: none; border-radius: 20px; font-size: 0.9em; outline: none; background-color: transparent; color: var(--text-color); }
        .search-icon-inside { color: var(--text-color-muted); font-size: 1.1em; flex-shrink: 0; }
        
        /* Toggle Switch Styles */
        .search-toggle-switch-container { position: relative; flex-shrink: 0; margin-left: 10px; }
        .search-toggle-checkbox { display: none; }
        .search-toggle-label { position: relative; display: block; width: 65px; height: 34px; cursor: pointer; background-color: var(--primary-color); border-radius: 34px; transition: background-color 0.4s; overflow: hidden; }
        .slider { position: absolute; content: ""; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: var(--white); transition: 0.4s; box-shadow: 0 0 5px rgba(0, 0, 0, 0.4); border-radius: 50%; }
        .search-toggle-checkbox:checked + .search-toggle-label { background-color: var(--web-accent-color); } 
        .search-toggle-checkbox:checked + .search-toggle-label .slider { transform: translateX(31px); }
        .toggle-icon { position: absolute; color: var(--white); font-size: 1.1em; top: 50%; transform: translateY(-50%); transition: opacity 0.4s; }
        .filter-icon { left: 10px; }
        .web-icon { right: 8px; opacity: 0; }
        .search-toggle-checkbox:checked + .search-toggle-label .filter-icon { opacity: 0; }
        .search-toggle-checkbox:checked + .search-toggle-label .web-icon { opacity: 1; }
        .search-mode-indicator { position: absolute; font-size: 0.7em; font-weight: 700; color: var(--white); top: 50%; transform: translateY(-50%); white-space: nowrap; transition: all 0.4s; }
        .filter-mode { left: 38px; opacity: 1; }
        .web-mode { right: 34px; opacity: 0;}
        .search-toggle-checkbox:checked + .search-toggle-label .filter-mode { opacity: 0; }
        .search-toggle-checkbox:checked + .search-toggle-label .web-mode { opacity: 1; right: auto; left: 8px; }
        
        /* Seletor de Plataforma (YouTube Music / Spotify) */
        #platform-selector { width: 100%; max-width: 1100px; display: none; justify-content: center; align-items: center; gap: 20px; padding: 10px 0; background-color: rgba(0, 0, 0, 0.2); border-top: 1px solid var(--glass-border); border-bottom: 1px solid var(--glass-border); margin: 0 auto; }
        #platform-selector.active { display: flex; }
        .platform-option { position: relative; cursor: pointer; display: flex; align-items: center; gap: 8px; font-size: 0.9em; color: var(--text-color-muted); transition: color 0.3s; }
        .platform-option i { font-size: 1.3em; color: var(--text-color-muted); transition: color 0.3s; }
        .platform-radio { display: none; }
        .custom-radio { width: 16px; height: 16px; border: 2px solid var(--text-color-muted); border-radius: 50%; display: inline-block; transition: all 0.3s; position: relative; }
        .custom-radio::after { content: ''; width: 8px; height: 8px; border-radius: 50%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); transition: transform 0.2s ease-in-out; }
        
        /* Cores Ativas do YouTube Music */
        #platform-youtube:checked ~ .platform-option[for="platform-youtube"] .custom-radio { border-color: var(--youtube-color); }
        #platform-youtube:checked ~ .platform-option[for="platform-youtube"] .custom-radio::after { background: var(--youtube-color); transform: translate(-50%, -50%) scale(1); }
        #platform-youtube:checked ~ .platform-option[for="platform-youtube"] .platform-label, 
        #platform-youtube:checked ~ .platform-option[for="platform-youtube"] i { 
            color: var(--youtube-color); 
        }

        /* Cores Ativas do Spotify */
        #platform-spotify:checked ~ .platform-option[for="platform-spotify"] .custom-radio { border-color: var(--spotify-color); }
        #platform-spotify:checked ~ .platform-option[for="platform-spotify"] .custom-radio::after { background: var(--spotify-color); transform: translate(-50%, -50%) scale(1); }
        #platform-spotify:checked ~ .platform-option[for="platform-spotify"] .platform-label, 
        #platform-spotify:checked ~ .platform-option[for="platform-spotify"] i { 
            color: var(--spotify-color); 
        }
        
        /* Toptabbar */
        .content-tabs { width: 100%; max-width: 1100px; margin: 0 auto; display: flex; padding: 10px 0; z-index: 999; background-color: var(--bg-color); border-bottom: 1px solid var(--glass-border); overflow-x: auto; white-space: nowrap; }
        .content-tabs::-webkit-scrollbar { display: none; }
        .tab-button { flex-shrink: 0; background: none; border: none; color: var(--text-color-muted); padding: 10px 15px; cursor: pointer; font-size: 1em; font-weight: 700; transition: color 0.3s, border-bottom 0.3s; border-bottom: 3px solid transparent; display: flex; align-items: center; gap: 8px; }
        .tab-button:hover { color: var(--white); }
        .tab-button.active { color: var(--primary-color); border-bottom: 3px solid var(--primary-color); }
        
        /* Conteúdo Principal */
        .social-feed-container { max-width: 1100px; margin: 0 auto; padding: 20px 10px 40px 10px; }
        .topic-filter-container { padding: 10px 0; margin-bottom: 20px; display: flex; gap: 10px; overflow-x: auto; white-space: nowrap; border-bottom: 1px solid var(--glass-border); }
        .topic-filter-container::-webkit-scrollbar { display: none; }
        .order-filter-button { flex-shrink: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; width: 70px; height: 70px; background-color: rgba(255, 255, 255, 0.1); color: var(--text-color-muted); border: 1px solid var(--glass-border); border-radius: 50%; cursor: pointer; font-size: 0.75em; font-weight: 500; transition: all 0.2s ease; text-align: center; }
        .order-filter-button i { font-size: 1.3em; margin-bottom: 4px; }
        .order-filter-button:hover:not(.active) { background-color: rgba(255, 255, 255, 0.2); color: var(--white); }
        .order-filter-button.active { background-color: var(--primary-color); color: var(--white); border-color: var(--primary-color); font-weight: 700; box-shadow: 0 0 15px rgba(138, 43, 226, 0.5); }

        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .media-grid { column-count: 2; column-gap: 10px; padding: 0 10px; }
        .media-card { break-inside: avoid; background-color: var(--card-bg-color); border: none; padding: 0; border-radius: 12px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; overflow: hidden; margin-bottom: 10px; width: 100%; position: relative; cursor: pointer; }
        .media-card:hover { transform: scale(1.02); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); } 
        .media-card.hide { display: none; }
        .media-card-image-container { width: 100%; height: auto; overflow: hidden; position: relative; }
        .media-card-image-container img { width: 100%; height: auto; object-fit: cover; display: block; transition: transform 0.3s ease; aspect-ratio: 1 / 1; }
        .media-card:hover .media-card-image-container img { transform: scale(1.03); }
        
        .media-card-preview-container, .close-card-btn { display: none !important; }

        .media-card-content { padding: 10px 15px; display: flex; justify-content: space-between; align-items: center; }
        .media-card-content h3 { color: var(--text-color-dark); font-size: 0.85em; margin: 0; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; flex-grow: 1; }
        .play-btn { color: var(--white); border: none; width: 30px; height: 30px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 0.9em; transition: background-color 0.2s, transform 0.2s; flex-shrink: 0; margin-left: 10px; cursor: pointer; }
        .play-btn i { font-size: 1em; }
        .play-btn.youtube { background-color: var(--youtube-color); }
        .play-btn.spotify { background-color: var(--spotify-color); }
        .play-btn.youtube:hover { background-color: #ff3333; transform: scale(1.1); }
        .play-btn.spotify:hover { background-color: #1ed760; transform: scale(1.1); }

        /* ===================================================================
           ESTILOS APRIMORADOS PARA o BOTÃO "VER MAIS"
           =================================================================== */
        #load-more-container { text-align: center; padding: 20px 10px; margin-top: 30px; }
        .load-more-button {
            background-color: var(--web-accent-color); 
            color: var(--white); border: none; padding: 12px 25px;
            border-radius: 8px; font-size: 1em; font-weight: 700;
            cursor: pointer; transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); 
            animation: none; 
        }

        .load-more-button:hover,
        .load-more-button:focus {
            transform: translateY(-2px);
            box-shadow: 0 0 10px var(--web-accent-color), 0 0 20px rgba(0, 0, 0, 0.4);
            outline: none; 
        }

        .load-more-button i { margin-right: 8px; }

        /* ===================================================================
           ESTILOS DO MODAL DE DETALHES (TELA CHEIA COM ABAS)
           =================================================================== */
        .modal-fullscreen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 3200; display: none; 
            background-color: var(--bg-color); 
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.3s;
        }

        .modal-fullscreen.open { display: flex; opacity: 1; }

        #details-modal-content {
            position: relative; width: 100%; max-width: 100%; height: 100vh; 
            background: var(--bg-color); border-radius: 0; box-shadow: none; 
            padding: 20px; padding-top: 50px; 
            display: flex; flex-direction: column; color: var(--text-color); 
            text-align: center;
        }

        #details-close-btn {
            position: absolute; top: 10px; right: 15px; background: none; border: none;
            color: var(--text-color); 
            font-size: 1.8em; cursor: pointer;
            transition: color 0.2s; z-index: 10;
        }
        #details-close-btn:hover { color: var(--accent-color); } 

        #modal-track-title { 
            font-size: 1.4em; font-weight: 700; color: var(--primary-color);
            margin-bottom: 5px;
        }
        #modal-artist-name { color: var(--text-color-muted); font-size: 1em; margin-bottom: 20px; }


        /* Estilos das Abas e Conteúdo no Modal */
        #details-modal .preview-tabs { 
            display: flex; border-bottom: 1px solid var(--glass-border); 
            margin: 10px 0; justify-content: center; flex-shrink: 0;
        }

        #details-modal .preview-tab-button {
            padding: 10px 15px; border: none; background: none;
            font-weight: 700; color: var(--text-color-muted);
            cursor: pointer; border-bottom: 3px solid transparent;
            transition: all 0.2s;
        }
        
        #details-modal .preview-tab-button.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
        }

        #details-modal .tab-content-wrapper { flex-grow: 1; overflow-y: hidden; padding: 0; }
        #details-modal .tab-content-preview { display: none; height: 100%; }
        #details-modal .tab-content-preview.active { display: block; }

        /* Conteúdo da Letra */
        #details-modal .lyric-content {
            white-space: pre-wrap; font-size: 1.1em; line-height: 1.6;
            color: var(--text-color); 
            max-height: 100%;
            overflow-y: auto; padding: 0 10%; 
            text-align: center; 
        }
        
        /* Conteúdo do Artista */
        #details-modal .artist-content {
            display: flex; flex-direction: column; align-items: center;
            text-align: center; font-size: 0.9em;
        }
        #details-modal .artist-content img {
            width: 80px; height: 80px; border-radius: 50%;
            object-fit: cover; margin-bottom: 10px;
            border: 3px solid var(--primary-color);
        }
        #details-modal .artist-content h4 { color: var(--primary-color); margin-bottom: 5px; font-size: 1.1em; }
        #details-modal .artist-content p {
            color: var(--text-color); text-align: justify;
            margin-top: 10px; line-height: 1.4;
            max-height: 250px; overflow-y: auto; padding: 0 10%;
        }
        
        /* Conteúdo da Prévia (Player) */
        .preview-player-container {
            width: 100%; height: 100%; display: flex;
            justify-content: center; align-items: center; padding: 20px;
        }

        #modal-preview-iframe { 
            width: 100%; max-width: 600px; height: 250px; 
            border: 2px solid var(--primary-color); border-radius: 10px; 
            background-color: black;
            box-shadow: 0 0 20px rgba(138, 43, 226, 0.5);
        }
        
        /* Media Query para Desktop */
        @media (min-width: 1024px) {
            .sidebar { width: 280px; transform: translateX(0); }
            #main-content-wrapper { margin-left: 280px; width: calc(100% - 280px); min-height: 100vh; }
            .menu-icon { display: none; }
            .top-nav-social { justify-content: center; }
            .media-grid { column-count: 3; }
            
            #details-modal-content { padding: 40px; }
            #modal-preview-iframe { height: 400px; }
        }
    </style>
</head>
<body>

<aside id="sidebar" class="sidebar">
    <div class="sidebar-header">
        <span class="logo">FanWiki</span>
        <button class="close-btn" onclick="toggleSidebar()"><i class="fas fa-times"></i></button>
    </div>
    <nav class="sidebar-nav">
        <ul>
            <li><a href="../Index.html" class="active"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="./Abaut.html"><i class="fas fa-info-circle"></i> Informações</a></li>
        </ul>
    </nav>
    <div class="sidebar-footer">© FanWiki</div>
</aside>

<div id="overlay" class="overlay"></div>

<div id="main-content-wrapper">
    
    <div class="header-content">
        <header class="top-nav-social" id="top-nav-social">
            <button class="menu-icon" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
            <i class="fab fa-youtube-music web-logo youtube" id="web-logo"></i> 

            <div class="search-bar-container" id="search-bar-container">
                <i class="fas fa-search search-icon-inside"></i>
                <input type="text" id="main-search-input" placeholder="Buscar por artista, álbum ou música...">
                
                <div class="search-toggle-switch-container">
                    <input type="checkbox" id="search-toggle" class="search-toggle-checkbox">
                    <label for="search-toggle" class="search-toggle-label">
                        <span class="slider round"></span>
                        <span class="search-mode-indicator filter-mode">Local</span>
                        <span class="search-mode-indicator web-mode" style="opacity:0;">Web</span>
                        <i class="fas fa-filter toggle-icon filter-icon"></i>
                        <i class="fas fa-globe toggle-icon web-icon"></i>
                    </label>
                </div>
            </div>
        </header>

        <div id="platform-selector">
            <input type="radio" id="platform-youtube" name="platform" class="platform-radio" value="youtube" checked>
            <label for="platform-youtube" class="platform-option">
                <span class="custom-radio"></span><i class="fab fa-youtube-music"></i><span class="platform-label">YouTube Music</span>
            </label>
            <input type="radio" id="platform-spotify" name="platform" class="platform-radio" value="spotify">
            <label for="platform-spotify" class="platform-option">
                <span class="custom-radio"></span><i class="fab fa-spotify"></i><span class="platform-label">Spotify</span>
            </label>
        </div>

        <nav class="content-tabs">
            <button class="tab-button active" data-tab-target="#tab-alls" data-label="Alls"><i class="fas fa-list-ul"></i> Alls</button>
            <button class="tab-button" data-tab-target="#tab-pop" data-label="Pop"><i class="fas fa-compact-disc"></i> Pop</button>
            <button class="tab-button" data-tab-target="#tab-rock" data-label="Rock"><i class="fas fa-guitar"></i> Rock</button>
            <button class="tab-button" data-tab-target="#tab-hiphop" data-label="Hip Hop"><i class="fas fa-microphone-alt"></i> Hip Hop</button>
            <button class="tab-button" data-tab-target="#tab-indie" data-label="Indie"><i class="fas fa-headphones-alt"></i> Indie</button>
            <button class="tab-button" data-tab-target="#tab-classica" data-label="Clássica"><i class="fas fa-violin"></i> Clássica</button>
        </nav>
    </div>
    
    <main class="social-feed-container">
        
        <div class="topic-filter-container"> 
            <button class="order-filter-button active" data-order-by="recent" data-label="Recentes"><i class="fas fa-sync-alt"></i> Recentes</button>
            <button class="order-filter-button" data-order-by="popular" data-label="Populares"><i class="fas fa-fire"></i> Populares</button>
            <button class="order-filter-button" data-order-by="top" data-label="Top Charts"><i class="fas fa-trophy"></i> Top Charts</button>
            <button class="order-filter-button" data-order-by="downloads" data-label="Plays"><i class="fas fa-play"></i> Plays</button>
        </div>
        
        <div id="tab-alls" class="tab-content active">
            
            <section class="media-grid" id="media-list-alls">
                </section>
            
            <div id="load-more-container">
                <button class="load-more-button" id="search-more-button">
                    <i class="fas fa-external-link-alt"></i> Ver Mais na Plataforma
                </button>
            </div>
            
        </div>
        
        <div id="tab-pop" class="tab-content"><div class="loading-indicator"><i class="fas fa-compact-disc"></i> Conteúdo filtrado: Pop...</div></div>
        <div id="tab-rock" class="tab-content"><div class="loading-indicator"><i class="fas fa-guitar"></i> Conteúdo filtrado: Rock...</div></div>
        <div id="tab-hiphop" class="tab-content"><div class="loading-indicator"><i class="fas fa-microphone-alt"></i> Conteúdo filtrado: Hip Hop...</div></div>
        <div id="tab-indie" class="tab-content"><div class="loading-indicator"><i class="fas fa-headphones-alt"></i> Conteúdo filtrado: Indie...</div></div>
        <div id="tab-classica" class="tab-content"><div class="loading-indicator"><i class="fas fa-violin"></i> Conteúdo filtrado: Clássica...</div></div>
        
    </main>
    
</div>

<div id="details-modal" class="modal-fullscreen">
    <div id="details-modal-content">
        <button id="details-close-btn" onclick="closeDetailsModal()"><i class="fas fa-times"></i></button>
        <h3 id="modal-track-title"></h3>
        <p id="modal-artist-name"></p>
        
        <div class="preview-tabs">
            <button class="preview-tab-button active" data-tab-target-id="modal-lyrics"><i class="fas fa-file-alt"></i> Letra</button>
            <button class="preview-tab-button" data-tab-target-id="modal-artist"><i class="fas fa-user-circle"></i> Artista</button>
            <button class="preview-tab-button" data-tab-target-id="modal-preview"><i class="fas fa-play-circle"></i> Prévia</button>
        </div>
        
        <div class="tab-content-wrapper">
            <div class="tab-content-preview active" data-tab-id="modal-lyrics">
                <pre class="lyric-content" id="modal-lyric-content"></pre>
            </div>
            
            <div class="tab-content-preview" data-tab-id="modal-artist">
                <div class="artist-content" id="modal-artist-content">
                    <img src="" alt="Foto do Artista" id="modal-artist-img">
                    <h4 id="modal-artist-h4"></h4>
                    <p class="bio-text" id="modal-artist-bio"></p>
                </div>
            </div>
            
            <div class="tab-content-preview" data-tab-id="modal-preview">
                <div class="preview-player-container">
                    <iframe 
                        id="modal-preview-iframe" 
                        src="" 
                        frameborder="0" 
                        allowfullscreen="" 
                        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                        loading="lazy">
                    </iframe>
                </div>
            </div>
        </div>
        
    </div>
</div>

<script>
    // =========================================================
    // --- ARRAY DE DADOS MUSICAIS (NOVO) ---
    // =========================================================
    const mediaData = [
        {
            title: "Pop Hits Vol. 1",
            artist: "Artista X",
            tags: "Pop,Dance,2024",
            trackId: "3w8rT6Fw8pQ",
            recent: 6,
            popular: 10000,
            downloads: 5000,
            albumImgSeed: "album1",
            artistImgSeed: "artistX",
            lyric: "Eu brilho na pista, sou letal no ritmo,\nNão tem perdão, o som é a nossa voz.\nTakedown total, é assim que se faz,\nGolden, Golden, a vibração me traz.",
            artistBio: "Artista X é uma estrela em ascensão no cenário Pop/Dance, conhecida por seus vocais vibrantes e produções de alta energia. Seus álbuns de estreia dominaram as paradas globais, misturando elementos de eletrônica com ritmos latinos. Ela começou sua carreira postando demos no YouTube, rapidamente ganhando milhões de seguidores. O álbum 'Pop Hits Vol. 1' é sua obra mais aclamada."
        },
        {
            title: "Vibes Acústicas",
            artist: "Banda Y",
            tags: "Rock,Indie,Alternativo",
            trackId: "v2tYFj6gL7I",
            recent: 4,
            popular: 5000,
            downloads: 1200,
            albumImgSeed: "album2",
            artistImgSeed: "artistY",
            lyric: "Sente a vibe, o bom é viver,\nSem medo de errar,\nSair de noite com a galera.\nBeber, beijar e cantar.\nVou sair hoje de noite, e amanhã vou descansar,\nPorque hoje é o dia...",
            artistBio: "A Banda Y é um trio de rock acústico conhecido por suas melodias introspectivas e letras poéticas. Formada em 2018, ganhou destaque no circuito indie por shows intimistas e um som que resgata o rock dos anos 90 com uma roupagem moderna. Seu hit 'Vibes Acústicas' é frequentemente citado como hino da geração."
        },
        {
            title: "Sinfonia N° 9",
            artist: "Maestro Z",
            tags: "Clássica,Sinfonia,Instrumental",
            trackId: "5pA9xT9nB4Q",
            recent: 1,
            popular: 9000,
            downloads: 200,
            albumImgSeed: "album3",
            artistImgSeed: "artistZ",
            lyric: "Ó, amigos, não nesse tom!\nEm vez disso, cantemos algo mais delicioso\ncantar e sons alegres.\nAlegria, formosa centelha divina,\nFilha do Elíseo,\nÉbrios de fogo entramos\nEm teu santuário celeste!",
            artistBio: "Maestro Z (nome fictício para fins de exemplo) é um renomado maestro conhecido por sua paixão em modernizar peças clássicas. Suas interpretações da Nona Sinfonia trouxeram a música orquestral para um novo público jovem, mantendo a reverência pela tradição. Ele é o fundador da Orquestra Filarmônica BlueViolet."
        },
        {
            title: "Batidas da Cidade",
            artist: "MC Alpha",
            tags: "HipHop,Rap,Trap",
            trackId: "6Jv4kP9tE8o",
            recent: 5,
            popular: 20000,
            downloads: 8000,
            albumImgSeed: "album4",
            artistImgSeed: "artistAlpha",
            lyric: "Na city o beat é forte, o asfalto é quente.\nViela é a passarela, o sonho é crescente.\nBatidas da cidade, o ritmo que não mente,\nCorre, corre, quem tá vivo, segue em frente.",
            artistBio: "MC Alpha é um dos nomes mais influentes do Rap/Trap brasileiro. Nascido nas periferias de São Paulo, suas letras abordam temas sociais, a vida na cidade grande e a busca por oportunidades. Sua autenticidade e flow marcante o fizeram um ícone cultural. 'Batidas da Cidade' é um hino de resistência e celebração."
        },
        {
            title: "Eletro Purple",
            artist: "Artista Omega",
            tags: "Pop,Indie,Alternativo",
            trackId: "1zG48E9Q0vQ",
            recent: 3,
            popular: 8000,
            downloads: 1500,
            albumImgSeed: "album5",
            artistImgSeed: "artistOmega",
            lyric: "Sinto a onda elétrica, a cor da noite.\nCaminho no roxo, o futuro me açoite.\nEletro Purple no meu sangue,\nA memória do passado, o futuro já longe.",
            artistBio: "Artista Omega é conhecida por sua sonoridade 'Eletro Purple', que combina sintetizadores dos anos 80 com batidas modernas e um toque melancólico. Sua música explora temas de amor, tecnologia e o futuro. Vencedora de múltiplos prêmios, ela é uma inovadora do Pop Indie."
        },
        {
            title: "Fúria Rock",
            artist: "Banda Beta",
            tags: "Rock,Metal,Hard",
            trackId: "0U8d3V6DqO8",
            recent: 2,
            popular: 3500,
            downloads: 100,
            albumImgSeed: "album6",
            artistImgSeed: "artistBeta",
            lyric: "Fúria! Um grito de guerra a soar,\nNo infinito universo, o ódio a se espalhar.\nHeavy Metal a dominar, a vida é um flagelo,\nQuem sabe alguém descubra o elo.",
            artistBio: "A Banda Beta é o expoente máximo do Hard Rock brasileiro. Com riffs pesados e performances eletrizantes, eles são sinônimo de 'Fúria Rock' desde o final dos anos 90. Conhecidos por sua dedicação inabalável ao gênero, influenciaram gerações de bandas de metal."
        }
    ];

    const rootStyles = document.documentElement.style;
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const searchInput = document.getElementById('main-search-input');
    const searchToggle = document.getElementById('search-toggle');
    const searchMoreButton = document.getElementById('search-more-button'); 

    const tabButtons = document.querySelectorAll('.content-tabs .tab-button');
    const orderFilterButtons = document.querySelectorAll('.order-filter-button'); 
    const mediaListAlls = document.getElementById('media-list-alls'); 
    
    const webLogo = document.getElementById('web-logo'); 
    const searchBarContainer = document.getElementById('search-bar-container');
    const platformSelector = document.getElementById('platform-selector');
    const platformRadios = document.querySelectorAll('input[name="platform"]');
    
    // Elementos do Modal de Detalhes (Letra/Artista/Prévia)
    const detailsModal = document.getElementById('details-modal');
    const modalTitle = document.getElementById('modal-track-title');
    const modalArtist = document.getElementById('modal-artist-name');
    const modalLyricContent = document.getElementById('modal-lyric-content');
    const modalArtistImg = document.getElementById('modal-artist-img');
    const modalArtistH4 = document.getElementById('modal-artist-h4');
    const modalArtistBio = document.getElementById('modal-artist-bio');
    const modalPreviewIframe = document.getElementById('modal-preview-iframe');

    const modalTabButtons = detailsModal.querySelectorAll('.preview-tab-button');
    const modalTabContents = detailsModal.querySelectorAll('.tab-content-preview');

    let currentTrackId = ''; 
    let currentTrackTitle = '';
    let activeCategory = 'alls'; // ID da aba ativa (ex: 'pop', 'rock')
    let activeCategoryLabel = 'Alls'; // Label da aba ativa (ex: 'Pop', 'Rock')
    let activeOrder = 'recent'; // Ordem ativa (ex: 'popular', 'recent')
    let activeOrderLabel = 'Recentes'; // Label da ordem ativa (ex: 'Populares', 'Recentes')
    let activePlatform = 'youtube'; // Plataforma ativa (ex: 'youtube', 'spotify')

    document.body.style.overflow = 'auto'; 

    // =========================================================
    // --- FUNÇÕES DE RENDERIZAÇÃO E FILTRO (ATUALIZADAS) ---
    // =========================================================

    // Função para gerar o HTML de um único Media Card a partir de um objeto de dados
    function createMediaCardHTML(data) {
        return `
            <article 
                class="media-card" 
                data-track-id="${data.trackId}"
                data-title="${data.title}"
                data-artist-name="${data.artist}"
                data-tags="${data.tags}" 
                data-recent="${data.recent}" 
                data-popular="${data.popular}" 
                data-downloads="${data.downloads}" 
                data-artist-img="${data.artistImgSeed}"
                data-lyric="${data.lyric.replace(/\n/g, '&#10;')}"
                data-artist-bio="${data.artistBio.replace(/\n/g, '&#10;')}"
                onclick="toggleCardPreview(this)">
                
                <div class="media-card-image-container">
                    <img 
                        src="https://picsum.photos/seed/${data.albumImgSeed}/300/300" 
                        data-hires-src="https://picsum.photos/seed/${data.albumImgSeed}/800/800" 
                        alt="Álbum ${data.title}">
                </div>
                
                <div class="media-card-content">
                    <h3>${data.title} - ${data.artist}</h3>
                    <div class="play-btn youtube" onclick="openPreviewTab(event, this.closest('.media-card'))"><i class="fab fa-youtube-music"></i></div>
                </div>
            </article>
        `;
    }

    // Função que carrega o Array de Dados e insere os cards no DOM
    function renderMediaCards(dataArray) {
        mediaListAlls.innerHTML = ''; // Limpa o container
        dataArray.forEach(data => {
            const html = createMediaCardHTML(data);
            mediaListAlls.insertAdjacentHTML('beforeend', html);
        });
        updatePlayButtonIcons(); // Garante que os ícones iniciais estejam corretos
    }


    function applyFilterAndSort() {
        if (searchToggle.checked) return;
        
        const query = searchInput.value.toLowerCase();
        
        // 1. FILTRAGEM
        let filteredData = mediaData.filter(data => {
            const tags = data.tags.toLowerCase();
            const title = data.title.toLowerCase();
            const categoryMatch = activeCategory === 'alls' || tags.includes(activeCategory.toLowerCase());
            const searchMatch = title.includes(query) || tags.includes(query) || data.artist.toLowerCase().includes(query);
            return categoryMatch && searchMatch;
        });
        
        // 2. ORDENAÇÃO
        if (activeOrder) {
            filteredData.sort((a, b) => {
                // Os nomes das propriedades de ordenação (recent, popular, downloads) são os mesmos do data-order-by
                const valA = a[activeOrder] || 0;
                const valB = b[activeOrder] || 0;
                return valB - valA; // Ordem decrescente
            });
        }
        
        // 3. RENDERIZAÇÃO
        renderMediaCards(filteredData);
        updateLoadMoreButton(); 
    }

    // --- Lógica da Sidebar ---
    function toggleSidebar() {
        sidebar.classList.toggle('open');
        overlay.style.display = sidebar.classList.contains('open') ? 'block' : 'none';
    }
    window.addEventListener('resize', () => {
        if (window.innerWidth >= 1024) {
             sidebar.classList.remove('open');
             overlay.style.display = 'none';
        }
    });
    overlay.addEventListener('click', toggleSidebar);

    // --- Lógica de Abas Principais e Ordenação (TopTabBar e OrderFilter) ---
    tabButtons.forEach(button => {
        button.addEventListener('click', () => {
            tabButtons.forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            button.classList.add('active');
            const target = button.getAttribute('data-tab-target');
            document.querySelector(target).classList.add('active');
            
            // ATUALIZA AS VARIÁVEIS DE CATEGORIA
            activeCategory = target.replace('#tab-', '');
            activeCategoryLabel = button.getAttribute('data-label');
            
            applyFilterAndSort(); 
            updateLoadMoreButton(); // ATUALIZA O BOTÃO COM A NOVA CATEGORIA
            closeDetailsModal();
        });
    });

    orderFilterButtons.forEach(button => {
        button.addEventListener('click', () => {
            orderFilterButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            
            // ATUALIZA AS VARIÁVEIS DE ORDEM
            activeOrder = button.getAttribute('data-order-by');
            activeOrderLabel = button.getAttribute('data-label');
            
            applyFilterAndSort();
            updateLoadMoreButton(); // ATUALIZA O BOTÃO COM A NOVA ORDEM
            closeDetailsModal();
        });
    });

    searchInput.addEventListener('input', function() {
        if (!searchToggle.checked) {
            applyFilterAndSort(); 
        }
    });

    // --- Lógica de Embed URL e Plataforma ---
    function getEmbedUrl(trackId, platform) {
        if (!trackId) return '';
        if (platform === 'spotify') {
            // URL de embed do Spotify (URI de exemplo)
            return `https://open.spotify.com/embed/track/$$${trackId}?utm_source=generator&theme=0`; 
        } else {
            // URL de embed do YouTube (com autoplay)
            return `https://www.youtube.com/embed/${trackId}?autoplay=1&mute=0&rel=0`;
        }
    }
    
    function updatePlayButtonIcons() {
        const isSpotify = activePlatform === 'spotify';
        const iconClass = isSpotify ? 'fa-spotify' : 'fa-youtube-music';
        const hoverClass = isSpotify ? 'spotify' : 'youtube';

        document.querySelectorAll('.media-card .play-btn').forEach(button => {
            const iconElement = button.querySelector('i');
            button.classList.remove('spotify', 'youtube');
            button.classList.add(hoverClass);
            iconElement.classList.remove('fa-spotify', 'fa-youtube-music');
            iconElement.classList.add('fab', iconClass);
        });
        
        const previewBtn = detailsModal.querySelector('.preview-tab-button[data-tab-target-id="modal-preview"]');
        if (previewBtn) {
            previewBtn.style.color = isSpotify ? 'var(--spotify-color)' : 'var(--youtube-color)';
            previewBtn.querySelector('i').className = `fas fa-play-circle`; 
        }
        updateLoadMoreButton();
    }

    function updatePlatformUI() {
        const isSpotify = activePlatform === 'spotify';
        
        if (isSpotify) {
            rootStyles.setProperty('--web-accent-color', 'var(--spotify-color)');
            webLogo.classList.remove('youtube', 'fa-youtube-music');
            webLogo.classList.add('spotify', 'fa-spotify');
            searchInput.placeholder = "Buscar no Spotify (Aperte Enter)...";
        } else { 
            rootStyles.setProperty('--web-accent-color', 'var(--youtube-color)');
            webLogo.classList.remove('spotify', 'fa-spotify');
            webLogo.classList.add('youtube', 'fa-youtube-music');
            searchInput.placeholder = "Buscar no YouTube Music (Aperte Enter)...";
        }
        
        if (searchToggle.checked) {
             // Força a animação de brilho a recarregar com a nova cor
             searchBarContainer.classList.remove('web-active'); 
             void searchBarContainer.offsetWidth; 
             searchBarContainer.classList.add('web-active');
        }
        updatePlayButtonIcons(); 
        if (detailsModal.classList.contains('open') && detailsModal.querySelector('.tab-content-preview[data-tab-id="modal-preview"]').classList.contains('active')) {
            loadPreviewIframe(currentTrackId);
        }
    }

    platformRadios.forEach(radio => {
        radio.addEventListener('change', function() {
            activePlatform = this.value;
            updatePlatformUI();
        });
    });

    function updateWebUI(isWebMode) {
        if (isWebMode) {
            searchBarContainer.classList.add('web-active');
            webLogo.style.opacity = '1';
            webLogo.style.visibility = 'visible';
            platformSelector.classList.add('active'); 
            searchMoreButton.style.display = 'none'; 
            updatePlatformUI(); 
        } else {
            searchBarContainer.classList.remove('web-active');
            webLogo.style.opacity = '0';
            webLogo.style.visibility = 'hidden';
            platformSelector.classList.remove('active'); 
            searchInput.placeholder = "Buscar por artista, álbum ou música..."; 
            updateLoadMoreButton();
        }
    }
    
    searchToggle.addEventListener('change', function() {
        const isChecked = this.checked;
        updateWebUI(isChecked); 
        if (!isChecked) {
             applyFilterAndSort(); 
        } else {
             // Redesenha todos os cards para o modo "Web"
             renderMediaCards(mediaData);
        }
        closeDetailsModal(); 
    });

    // --- Lógica do Botão "Ver Mais" e Links de Busca ---
    function getSearchUrl(query) {
        const encodedQuery = encodeURIComponent(query);
        // URLs de exemplo para plataformas externas
        if (activePlatform === 'spotify') {
            return `https://open.spotify.com/search/$$${encodedQuery}`; 
        } else {
            return `https://music.youtube.com/search?q=${encodedQuery}`;
        }
    }
    
    function updateLoadMoreButton() {
        if (searchToggle.checked) {
             searchMoreButton.style.display = 'none';
             return;
        }
        
        const platformName = activePlatform === 'spotify' ? 'Spotify' : 'YouTube Music';
        let searchKeywords = activeCategoryLabel; // Começa com a categoria ativa
        
        if (activeCategory === 'alls') {
            // Se for 'Alls', usa o filtro de ordem (Recentes, Populares, etc.)
            searchKeywords = activeOrderLabel;
        } else {
            // Se for Pop, Rock, etc., combina a Categoria e a Ordem
            searchKeywords = `${activeCategoryLabel} ${activeOrderLabel}`;
        }
        
        const buttonText = `Ver Mais "${searchKeywords}" no ${platformName}`;
        
        searchMoreButton.innerHTML = `<i class="fas fa-external-link-alt"></i> ${buttonText}`;
        
        searchMoreButton.onclick = () => {
            const url = getSearchUrl(searchKeywords);
            window.open(url, '_blank');
        };
        
        searchMoreButton.style.display = 'inline-block';
    }
    
    // =========================================================
    // --- Funções da Busca Principal (Enter) - Atualizada ---
    // =========================================================
    searchInput.addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
            event.preventDefault(); 
            handleSearch();
        }
    });

    function handleSearch() {
        let query = searchInput.value.trim();
        
        if (searchToggle.checked) {
            // MODO WEB: Usa a categoria/ordem se a busca estiver vazia
            if (query === '') {
                if (activeCategory === 'alls') {
                    // Se for 'Alls', usa o filtro de ordem (Recentes/Populares)
                    query = activeOrderLabel; 
                } else {
                    // Se for uma categoria específica (Pop/Rock), usa ela
                    query = activeCategoryLabel; 
                }
            }
            
            if (query === '') return;
            
            const url = getSearchUrl(query);
            window.open(url, '_blank');
            
        } else {
            // MODO LOCAL: Apenas filtra os cards internos
            applyFilterAndSort();
        }
    }


    // =========================================================
    // --- Funções do Modal de Detalhes (Letra/Artista/Prévia) ---
    // =========================================================

    function loadPreviewIframe(trackId) {
        const embedUrl = getEmbedUrl(trackId, activePlatform);
        if (embedUrl) {
            modalPreviewIframe.src = embedUrl;
        }
    }

    function unloadPreviewIframe() {
        modalPreviewIframe.src = ''; 
    }
    
    function toggleCardPreview(card) {
        openCardDetailsModal(card, 'modal-lyrics');
    }

    function openPreviewTab(event, card) {
        event.stopPropagation(); 
        openCardDetailsModal(card, 'modal-preview');
    }

    function openCardDetailsModal(card, initialTabId = 'modal-lyrics') {
        const title = card.getAttribute('data-title');
        const artistName = card.getAttribute('data-artist-name');
        const trackId = card.getAttribute('data-track-id');
        // Usa replace para transformar a quebra de linha codificada de volta (&#10; -> \n)
        const lyric = card.getAttribute('data-lyric').replace(/&#10;/g, '\n'); 
        const bio = card.getAttribute('data-artist-bio').replace(/&#10;/g, '\n');
        const artistImgSeed = card.getAttribute('data-artist-img');
        const artistImg = `https://picsum.photos/seed/${artistImgSeed}/80/80`;


        // 1. Preenche os dados
        modalTitle.textContent = title;
        modalArtist.textContent = `Artista: ${artistName}`;
        currentTrackId = trackId;
        currentTrackTitle = title;
        modalLyricContent.textContent = lyric || `Letra de "${title}" indisponível no momento.`;
        modalArtistImg.src = artistImg;
        modalArtistH4.textContent = artistName;
        modalArtistBio.textContent = bio || "Biografia do artista não fornecida.";
        
        // 2. Ativa a aba inicial e carrega/descarrega o player
        activateModalTab(initialTabId);

        // 3. Abre o Modal
        detailsModal.classList.add('open');
    }

    function activateModalTab(targetId) {
        modalTabButtons.forEach(btn => btn.classList.remove('active'));
        modalTabContents.forEach(content => content.classList.remove('active'));
        
        const targetButton = detailsModal.querySelector(`.preview-tab-button[data-tab-target-id="${targetId}"]`);
        const targetContent = detailsModal.querySelector(`.tab-content-preview[data-tab-id="${targetId}"]`);

        if (targetButton && targetContent) {
            targetButton.classList.add('active');
            targetContent.classList.add('active');
        }

        if (targetId === 'modal-preview') {
            loadPreviewIframe(currentTrackId);
        } else {
            unloadPreviewIframe();
        }
    }

    modalTabButtons.forEach(button => {
        button.addEventListener('click', (e) => {
            e.stopPropagation();
            const targetId = button.getAttribute('data-tab-target-id');
            activateModalTab(targetId);
        });
    });

    function closeDetailsModal() {
        detailsModal.classList.remove('open');
        unloadPreviewIframe(); 
        currentTrackId = '';
        currentTrackTitle = '';
    }

    // --- Inicialização ---
    document.addEventListener('DOMContentLoaded', () => {
        // A primeira coisa a fazer é renderizar os cards a partir do array.
        renderMediaCards(mediaData);
        
        // Em seguida, configura o UI inicial
        updatePlatformUI(); 
        updateWebUI(false); 
        applyFilterAndSort(); // Aplica a ordenação inicial (Recentes)
    });
</script>

</body>
</html>

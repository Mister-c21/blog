<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FanWiki - Characters</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* üé® Vari√°veis de Cor e Estilo */
        :root {
            --primary-color: #8a2be2;
            --primary-light: #a052f5;     
            --background-color: #120e1a;
            --text-color: #e0e0e0;        
            --secondary-color: #fff;      
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --blur-value: 10px;                  
            --font-stack: 'Poppins', 'Helvetica Neue', Arial, sans-serif;
            --menu-width: 250px; 
            --list-width-desktop: 400px; 
            --redid-color: #E60023; 
            --white: #fff;
            --text-color-muted: #aaa;
        }

        /* ANIMA√á√ÉO DA BORDA GLOW (Redid Mode) */
        @keyframes glowing-redid {
            0% { box-shadow: 0 0 5px rgba(230, 0, 35, 0.4), 0 0 10px rgba(230, 0, 35, 0.2); }
            50% { box-shadow: 0 0 10px var(--redid-color), 0 0 20px rgba(230, 0, 35, 0.6); }
            100% { box-shadow: 0 0 5px rgba(230, 0, 35, 0.4), 0 0 10px rgba(230, 0, 35, 0.2); }
        }

        /* Reset e Layout BASE */
        * { box-sizing: border-box; }
        html, body { height: 100%; margin: 0; padding: 0; overflow-x: hidden; }
        body {
            font-family: var(--font-stack); 
            background-color: var(--background-color);
            color: var(--text-color); 
            display: flex; 
            position: relative; 
            left: 0; 
            transition: left 0.3s ease-out;
            align-items: stretch; 
        }
        
        /* ‚ò∞ SIDEBAR ‚ò∞ */
        .sidebar { 
            position: fixed; top: 0; left: 0; height: 100%; width: var(--menu-width); 
            background-color: #1a1524; padding-top: 20px;
            transform: translateX(-100%); transition: transform 0.3s ease-out; 
            z-index: 1000; box-shadow: 2px 0 5px rgba(0, 0, 0, 0.5); 
            display: flex; flex-direction: column;
        }
        .sidebar-header {
            padding: 15px 20px; font-size: 18px; font-weight: 700; color: var(--primary-light);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1); position: relative;
        }
        .sidebar-nav { flex-grow: 1; overflow-y: auto; }
        .sidebar-nav a {
            display: flex; align-items: center; padding: 12px 20px; color: var(--text-color); 
            text-decoration: none; font-size: 15px; transition: background-color 0.2s, border-left 0.2s, padding-left 0.2s;
        }
        .sidebar-nav a i { margin-right: 12px; width: 18px; text-align: center; color: var(--primary-light); }
        .sidebar-nav a:hover, .sidebar-nav a.active {
            background-color: rgba(138, 43, 226, 0.2); border-left: 3px solid var(--primary-light); padding-left: 17px; 
        }
        .menu-open .sidebar { transform: translateX(0); }
        #close-sidebar-button {
            display: none; background: none; border: none; color: var(--secondary-color);
            font-size: 24px; cursor: pointer; position: absolute; right: 15px; top: 15px;
        }
        
        /* LISTA DE PERSONAGENS CONTAINER */
        .direct-container {
            width: 100%; max-width: var(--list-width-desktop); height: 100%; 
            display: flex; flex-direction: column; 
            background: var(--glass-bg); backdrop-filter: blur(var(--blur-value)); -webkit-backdrop-filter: blur(var(--blur-value));
            border-left: 1px solid var(--glass-border); border-right: 1px solid var(--glass-border);
            transition: transform 0.3s ease-out; flex-shrink: 0; 
        }
        .menu-open .direct-container { transform: translateX(var(--menu-width)); box-shadow: -10px 0 20px rgba(0, 0, 0, 0.5); }

        .direct-header {
            flex-shrink: 0; display: flex; justify-content: space-between; align-items: center;
            padding: 15px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); position: relative;
        }
        .menu-button { font-size: 24px; color: var(--secondary-color); cursor: pointer; z-index: 10; width: 24px; text-align: center; line-height: 1; }
        .direct-header h2 { position: absolute; left: 50%; transform: translateX(-50%); margin: 0; font-size: 18px; font-weight: 700; color: var(--secondary-color); z-index: 5; }
        
        /* Barra de Busca */
        .search-bar { 
            flex-shrink: 0; 
            padding: 10px 15px; 
            border-bottom: 1px solid rgba(255, 255, 255, 0.1); 
            display: flex; 
            align-items: center;
            gap: 10px;
        }
        
        .search-input-wrapper {
            flex-grow: 1;
            position: relative;
            display: flex;
            align-items: center;
        }
        
        .search-bar input[type="text"] {
            width: 100%; 
            padding: 12px 18px; /* Aumentado */
            padding-right: 40px; 
            border: none; 
            border-radius: 12px; /* Mais arredondado */
            background-color: rgba(255, 255, 255, 0.15); /* Fundo mais destacado */
            color: var(--text-color);
            font-family: var(--font-stack); 
            font-size: 14px;
            transition: all 0.3s ease;
            box-shadow: 0 0 0px 2px transparent; 
        }
        .search-bar input[type="text"]:focus {
            outline: none;
            box-shadow: 0 0 0px 2px var(--primary-light); 
            background-color: rgba(255, 255, 255, 0.18);
        }
        .search-bar.redid-active input[type="text"] {
            background-color: rgba(230, 0, 35, 0.15); /* Ajustado */
            border: 1px solid var(--redid-color);
            animation: glowing-redid 2s infinite alternate;
        }
        .search-icon-local {
            position: absolute;
            right: 18px; /* Ajustado */
            color: var(--primary-light); /* Cor de destaque */
            font-size: 1em;
            pointer-events: none; 
        }
        
        /* L√≥gica do Toggle (Redid Mode) */
        .search-toggle-switch-container { position: relative; flex-shrink: 0; }
        .search-toggle-checkbox { display: none; }
        .search-toggle-label {
            position: relative; display: block; width: 50px; height: 26px; cursor: pointer;
            background-color: var(--primary-color); border-radius: 13px; transition: background-color 0.4s;
            overflow: hidden; 
        }
        .slider {
            position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px;
            background-color: var(--white); transition: 0.4s; box-shadow: 0 0 5px rgba(0, 0, 0, 0.4);
        }
        .slider.round { border-radius: 50%; }
        .search-toggle-checkbox:checked + .search-toggle-label { background-color: var(--redid-color); } 
        .search-toggle-checkbox:checked + .search-toggle-label .slider { transform: translateX(24px); }
        .toggle-icon { position: absolute; color: var(--white); font-size: 0.8em; top: 50%; transform: translateY(-50%); transition: opacity 0.4s; }
        .filter-icon { left: 8px; }
        .redid-icon { right: 8px; opacity: 0; } 
        .search-toggle-checkbox:checked + .search-toggle-label .filter-icon { opacity: 0; }
        .search-toggle-checkbox:checked + .search-toggle-label .redid-icon { opacity: 1; }

        
        .filter-tabs { 
            flex-shrink: 0; padding: 10px 15px; overflow-x: auto; white-space: nowrap; 
            border-bottom: 1px solid rgba(255, 255, 255, 0.1); -ms-overflow-style: none; scrollbar-width: none; 
        }
        .filter-tabs button { 
            background: rgba(255, 255, 255, 0.1); color: var(--text-color); border: 1px solid rgba(255, 255, 255, 0.2); 
            padding: 8px 15px; margin-right: 10px; border-radius: 20px; cursor: pointer; 
            font-size: 13px; font-weight: 500; transition: background-color 0.3s; 
        }
        .filter-tabs button.active { 
            background-color: var(--primary-color); color: var(--secondary-color); border-color: var(--primary-light); 
        }
        .search-bar.redid-active + .filter-tabs button.active {
             background-color: var(--redid-color); 
             border-color: var(--redid-color); 
        }
        .filter-tabs::-webkit-scrollbar { display: none; }
        
        .contact-list { flex-grow: 1; overflow-y: auto; scroll-behavior: smooth; } /* Smooth scroll adicionado */
        .contact-list::-webkit-scrollbar { display: none; }
        .contact-item { 
            display: flex; align-items: center; 
            padding: 15px 20px; /* Aumentado */
            cursor: pointer; 
            transition: background 0.3s, box-shadow 0.3s, border-left 0.3s; 
            border-bottom: 1px solid rgba(255, 255, 255, 0.05); 
        }
        .contact-item:hover { 
            background-color: rgba(138, 43, 226, 0.15); /* Mais evidente */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); /* Efeito de eleva√ß√£o */
            border-left: 8px solid var(--primary-color); /* Borda mais grossa */
        }
        .avatar { width: 50px; height: 50px; border-radius: 50%; margin-right: 15px; object-fit: cover; padding: 2px; }
        
        .contact-item .contact-details { 
            display: flex; 
            flex-direction: column; 
            flex-grow: 1;
        }
        .contact-details h3 { 
            margin: 0; 
            font-size: 18px; /* Maior */
            font-weight: 600; 
        }
        .contact-item .contact-details span { /* Estilo para Categoria/Subtexto */
            font-size: 12px;
            color: var(--text-color-muted);
            margin-top: 2px;
        }


        /* PAINEL DE PERFIL (MODAL) */
        .profile-panel {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.8); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); 
            z-index: 2000; opacity: 0; visibility: hidden; 
            transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
        }
        .profile-panel .profile-modal-content {
            background-color: #1a1524; width: 100%; height: 100%; overflow-y: hidden; 
            color: var(--text-color); position: relative; display: flex; flex-direction: column;
        }
        .profile-open .profile-panel { opacity: 1; visibility: visible; }
        
        .modal-close-button {
            position: absolute; top: 15px; right: 15px; background: rgba(0, 0, 0, 0.5);
            border: none; border-radius: 50%; width: 35px; height: 35px; font-size: 24px;
            color: var(--secondary-color); cursor: pointer; z-index: 2010; display: flex; justify-content: center; align-items: center;
        }

        /* --- VIEWS DO MODAL (Perfil vs Galeria) --- */
        #profile-main-view {
            width: 100%; height: 100%; overflow-y: auto;
            transition: opacity 0.3s ease;
        }
        #profile-main-view::-webkit-scrollbar { display: none; }

        /* HEADER DO PERFIL */
        .modal-profile-header {
            text-align: center; 
            padding: 40px 20px 70px; /* Ajustado */
            background: linear-gradient(to top, var(--background-color) 10%, #301f40 100%); /* Gradiente refinado */
            padding-bottom: 70px; position: relative; 
        }
        .modal-profile-avatar {
            width: 120px; height: 120px; border-radius: 50%; object-fit: cover;
            border: 4px solid var(--background-color); 
            position: absolute; 
            bottom: -60px; left: 50%; transform: translateX(-50%);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        }
        .modal-profile-info { padding: 80px 20px 20px; text-align: center; }
        .modal-profile-description { text-align: justify; margin-top: 20px; margin-bottom: 30px; }

        /* BOT√ÉO DA GALERIA */
        #gallery-button {
            position: absolute; bottom: -30px; left: 50%; transform: translateX(calc(-50% - 60px));
            width: 30px; height: 30px; background-color: rgba(138, 43, 226, 0.8); 
            color: var(--secondary-color); border: 2px solid var(--background-color); border-radius: 50%;
            display: flex; justify-content: center; align-items: center; font-size: 14px; cursor: pointer; z-index: 50; 
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); transition: background-color 0.2s;
        }
        #gallery-button:hover { background-color: var(--primary-light); }

        /* M√öSICA */
        #music-button {
            background-color: var(--primary-light); color: var(--secondary-color);
            border: none; border-radius: 50%; 
            width: 30px; height: 30px; /* Ajustado */
            font-size: 16px; /* Ajustado */
            cursor: pointer; margin-left: 10px; vertical-align: middle; display: inline-flex; justify-content: center; align-items: center;
        }
        #music-button.active { background-color: #1DB954; box-shadow: 0 0 10px rgba(29, 185, 84, 0.8); }
        
        #spotify-player-container {
            width: 100%; max-width: 350px; margin: 20px auto; overflow: hidden; 
            display: none; text-align: left;
            background: rgba(0, 0, 0, 0.3); /* Adicionado */
            padding: 10px; /* Adicionado */
            border-radius: 10px; /* Adicionado */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4); /* Adicionado */
            border: 1px solid rgba(255, 255, 255, 0.1); /* Adicionado */
        }
        #spotify-player-container.active { display: block; }
        #spotify-player-container iframe { width: 100%; height: 80px; border-radius: 6px; border: none; } /* Borda ajustada */
        .spotify-title { 
            color: var(--primary-light); 
            font-size: 13px; 
            margin-bottom: 8px; 
            font-weight: 700; 
            text-transform: uppercase; /* Adicionado */
        }

        /* INFO CARDS (Detalhes) */
        .profile-info-cards {
            display: flex; overflow-x: auto; padding: 10px 0; margin: 0 20px; gap: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1); border-top: 1px solid rgba(255, 255, 255, 0.1);
            -ms-overflow-style: none; scrollbar-width: none;
        }
        .profile-info-cards::-webkit-scrollbar { display: none; }
        .info-card {
            flex: 0 0 auto; width: 140px; padding: 10px;
            background: rgba(255, 255, 255, 0.08); border-radius: 8px; text-align: left;
            border: 1px solid rgba(255, 255, 255, 0.15); min-height: 80px;
        }
        .info-card strong { display: block; font-size: 11px; color: var(--primary-light); font-weight: 600; margin-bottom: 3px; text-transform: uppercase; }
        .info-card span { display: block; font-size: 14px; font-weight: 400; color: var(--secondary-color); white-space: normal; }

        /* ACTION CARDS (Wikipedia, etc) */
        .profile-action-cards {
            display: flex; overflow-x: auto; white-space: nowrap; padding: 20px; margin: 0 20px; gap: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1); -ms-overflow-style: none; scrollbar-width: none;
        }
        .profile-action-cards::-webkit-scrollbar { display: none; }
        .action-card {
            flex: 0 0 130px; width: 130px; background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            padding: 15px 10px; border-radius: 12px; text-align: center; cursor: pointer;
            transition: transform 0.2s; color: var(--secondary-color); font-weight: 600; font-size: 14px;
        }
        .action-card:hover { transform: translateY(-3px); background: rgba(255, 255, 255, 0.15); }
        .action-card span { display: block; font-size: 28px; margin-bottom: 5px; line-height: 1; }

        /* üñºÔ∏è GALERIA üñºÔ∏è */
        #gallery-view {
            width: 100%; height: 100%; position: absolute; top: 0; left: 0;
            background-color: #1a1524; display: flex; flex-direction: column;
            opacity: 0; pointer-events: none; transform: translateX(20px);
            transition: opacity 0.3s ease, transform 0.3s ease; z-index: 2005;
        }
        #gallery-view.active { opacity: 1; pointer-events: auto; transform: translateX(0); }

        .gallery-header {
            padding: 15px 20px; display: flex; align-items: center; justify-content: space-between;
            border-bottom: 1px solid var(--glass-border); background: rgba(0,0,0,0.3); flex-shrink: 0;
        }
        .gallery-header h3 { margin: 0; font-size: 16px; font-weight: 600; color: var(--secondary-color); }
        .back-button {
            background: none; border: none; color: var(--primary-light);
            font-size: 18px; cursor: pointer; display: flex; align-items: center; font-weight: 600;
        }
        .back-button i { margin-right: 8px; }

        .gallery-tabs-container {
            display: flex; justify-content: center; padding: 10px; background: rgba(255,255,255,0.02); flex-shrink: 0;
        }
        .gallery-tab-btn {
            background: transparent; border: none; color: var(--text-color); opacity: 0.6;
            padding: 10px 20px; margin: 0 10px; font-size: 14px; font-weight: 600;
            cursor: pointer; position: relative; transition: all 0.3s ease;
        }
        .gallery-tab-btn.active { opacity: 1; color: var(--primary-light); }
        .gallery-tab-btn.active::after {
            content: ''; position: absolute; bottom: 0; left: 0;
            width: 100%; height: 3px; background-color: var(--primary-light); border-radius: 3px;
        }

        .gallery-content-area { flex-grow: 1; overflow-y: auto; padding: 20px; position: relative; }
        .gallery-section { display: none; animation: fadeIn 0.4s ease; }
        .gallery-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .gallery-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px; }
        .gallery-img-item {
            width: 100%; aspect-ratio: 1; border-radius: 8px; overflow: hidden;
            background: rgba(255,255,255,0.1); cursor: pointer; position: relative;
        }
        .gallery-img-item img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s; }
        .gallery-img-item:hover img { transform: scale(1.1); }

        .video-list { display: flex; flex-direction: column; gap: 15px; }
        .video-item {
            background: rgba(255,255,255,0.05); border-radius: 10px; overflow: hidden;
            display: flex; flex-direction: column; cursor: pointer;
        }
        .video-thumbnail {
            width: 100%; aspect-ratio: 16/9; background-color: #000;
            display: flex; align-items: center; justify-content: center;
        }
        .video-thumbnail i { font-size: 40px; color: rgba(255,255,255,0.7); }
        .video-info { padding: 10px; }
        .video-info h4 { margin: 0 0 5px; font-size: 14px; color: var(--secondary-color); }
        .video-info span { font-size: 12px; color: #aaa; }
        
        /* BOT√ÉO VER MAIS */
        .gallery-footer { 
            text-align: center; 
            padding: 20px 0 10px; 
            margin-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        .more-button {
            background-color: var(--primary-color);
            color: var(--secondary-color);
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: background-color 0.2s, transform 0.1s;
        }
        .more-button:hover {
            background-color: var(--primary-light);
            transform: translateY(-1px);
        }

        /* üëÅÔ∏è MEDIA VIEWER (SUBMODAL/LIGHTBOX) üëÅÔ∏è */
        #media-viewer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.95); z-index: 3000; 
            display: none; justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.3s ease;
        }
        #media-viewer.active { display: flex; opacity: 1; }
        
        #close-media-button {
            position: absolute; top: 20px; right: 20px; background: none; border: none;
            color: #fff; font-size: 35px; cursor: pointer; z-index: 3010;
        }
        
        #media-content-wrapper {
            max-width: 90%; max-height: 90%; width: 100%;
            display: flex; justify-content: center; align-items: center;
            transition: all 0.3s ease; 
        }

        /* üñºÔ∏è ESTILO PINTEREST (IMAGEM) üñºÔ∏è */
        #media-content-wrapper.pinterest-style {
            max-width: 550px; 
            width: auto; 
            background: rgba(25, 20, 29, 0.8); 
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.5);
        }
        #media-content-wrapper.pinterest-style img {
            max-height: 85vh; 
            max-width: 100%;
            border-radius: 8px;
            box-shadow: none; 
        }

        /* ‚ñ∂Ô∏è ESTILO YOUTUBE (V√çDEO) ‚ñ∂Ô∏è */
        #media-content-wrapper.youtube-style {
            max-width: 850px; 
            width: 90%; 
            background: #000; 
            border-radius: 4px;
            padding: 0;
            position: relative;
            height: 0;
            padding-bottom: 56.25%; 
            box-shadow: 0 5px 30px rgba(138, 43, 226, 0.3);
        }
        #media-content-wrapper.youtube-style iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 0; 
            box-shadow: none;
        }
        
        @media (max-width: 768px) {
            #media-content-wrapper.youtube-style {
                max-width: 95%;
            }
            #media-content-wrapper.pinterest-style {
                max-width: 90%;
            }
        }


        /* Desktop OTIMIZADO */
        @media (min-width: 768px) {
            body { 
                justify-content: flex-start; /* Alinha no in√≠cio */
                align-items: stretch; 
                overflow-y: hidden; 
                left: 0 !important; 
                padding: 0; /* Remove o padding do corpo */
            }
            
            /* Sidebar Fixa e Vis√≠vel */
            .sidebar { 
                transform: translateX(0) !important; 
                position: static; 
                flex-shrink: 0;
                width: var(--menu-width);
                height: 100vh;
                margin: 0;
                border-radius: 0;
                box-shadow: 2px 0 5px rgba(0, 0, 0, 0.5); 
            }
            .menu-button { display: none; }
            .direct-header h2 { 
                position: static; 
                transform: none; 
            }
            .direct-header {
                 justify-content: center;
            }
            
            /* Container da Lista */
            .direct-container { 
                max-width: var(--list-width-desktop); 
                transform: none !important; 
                border-left: none; 
                border-radius: 0;
                height: 100vh;
                margin: 0;
            }
            .menu-open .direct-container { 
                transform: none; 
                box-shadow: none; 
            }
            
            /* Painel de Perfil (Ocupa o restante do espa√ßo) */
            .profile-panel {
                position: relative; 
                width: auto; 
                min-width: 450px; 
                flex-grow: 1; 
                height: 100vh;
                background-color: transparent; 
                backdrop-filter: none; -webkit-backdrop-filter: none; z-index: 10; 
                opacity: 1; visibility: visible; 
                transform: translateX(100%) !important; 
            }
            .profile-panel .profile-modal-content {
                height: 100%; 
                background: var(--glass-bg); 
                backdrop-filter: blur(var(--blur-value));
                border-left: 1px solid var(--glass-border);
                border-radius: 0;
            }
            .profile-open .profile-panel { transform: translateX(0) !important; }
            .modal-close-button { display: none; }
            
            /* Ajustes Finos do Perfil */
            .modal-profile-avatar {
                width: 150px; height: 150px; 
                border: 6px solid var(--background-color); 
                bottom: -75px; 
            }
            #gallery-button { 
                 bottom: -30px; 
                 left: 50%; 
                 transform: translateX(-50%); 
                 width: 40px; height: 40px; 
                 font-size: 18px; 
             }
             
            /* Cards em Grid */
            .profile-info-cards {
                display: grid; 
                grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); 
                gap: 15px; 
                overflow-x: hidden;
            }
            .info-card {
                flex: auto;
                width: auto;
                padding: 15px;
                background: rgba(255, 255, 255, 0.05);
                border-radius: 12px;
                border: none;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); 
            }
            .profile-action-cards {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); 
                white-space: normal;
                gap: 20px;
                overflow-x: hidden;
            }
            .action-card {
                flex: auto;
                width: auto;
                background: rgba(138, 43, 226, 0.1); 
                border: 1px solid rgba(138, 43, 226, 0.5); 
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
                border-radius: 15px;
            }
            .action-card:hover { 
                transform: translateY(-5px); 
                background: rgba(138, 43, 226, 0.2); 
                box-shadow: 0 8px 15px rgba(138, 43, 226, 0.2); 
            }
            
            .gallery-grid { grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 15px; }
        }
    </style>
</head>
<body>

    <div id="media-viewer">
        <button id="close-media-button">√ó</button>
        <div id="media-content-wrapper">
            </div>
    </div>

    <div class="sidebar">
        <div class="sidebar-header">FanWiki<button id="close-sidebar-button">√ó</button></div>
        <nav class="sidebar-nav">
            <a href="../Index.html" class="active"><i class="fas fa-home"></i> P√°gina Inicial</a>
            <a href="./Abaut.html"><i class="fas fa-info-circle"></i>Sobre</a>
        </nav>
    </div>

    <div class="direct-container">
        <div class="direct-header">
            <span class="menu-button" id="menu-button">‚ò∞</span>
            <h2>Characters</h2>
            <span class="action-icon"></span> 
        </div>
        
        <div class="search-bar" id="search-bar">
            <div class="search-input-wrapper">
                <input type="text" id="search-input" placeholder="Buscar Personagens..." aria-label="Buscar Personagens">
                <i class="fas fa-search search-icon-local"></i>
            </div>
            <div class="search-toggle-switch-container">
                <input type="checkbox" id="search-toggle" class="search-toggle-checkbox">
                <label for="search-toggle" class="search-toggle-label" title="Alternar Modo de Busca">
                    <span class="slider round"></span>
                    <i class="fas fa-filter toggle-icon filter-icon"></i>
                    <i class="fab fa-reddit-alien toggle-icon redid-icon"></i> </label>
            </div>
        </div>
        <div class="filter-tabs" id="filter-tabs">
            <button class="active" data-filter="all">All</button>
            <button data-filter="series">Series</button>
            <button data-filter="animes">Animes</button>
            <button data-filter="cartoons">Cartoons</button>
            <button data-filter="films">Films</button>
            <button data-filter="books">Books</button>
            <button data-filter="games">Games</button>
            <button data-filter="comics">Comics</button> 
            <button data-filter="kpop">K-Pop</button> 
            <button data-filter="others">Others</button>
        </div>
        <div class="contact-list" id="contact-list">
            <div class="contact-item" data-category="animes" data-character-name="Goku"><img src="https://via.placeholder.com/150/8a2be2/FFFFFF?text=G" alt="Avatar" class="avatar"><div class="contact-details"><h3>Goku</h3><span>Animes - Dragon Ball</span></div></div>
            <div class="contact-item" data-category="books" data-character-name="Hermione Granger"><img src="https://via.placeholder.com/150/a052f5/FFFFFF?text=H" alt="Avatar" class="avatar"><div class="contact-details"><h3>Hermione Granger</h3><span>Livros - Harry Potter</span></div></div>
            <div class="contact-item" data-category="comics" data-character-name="Mulher Maravilha"><img src="https://via.placeholder.com/150/ff4500/FFFFFF?text=W" alt="Avatar" class="avatar"><div class="contact-details"><h3>Mulher Maravilha</h3><span>Comics - DC Comics</span></div></div>
            <div class="contact-item" data-category="comics" data-character-name="Batman"><img src="https://via.placeholder.com/150/111111/FFFFFF?text=B" alt="Avatar" class="avatar"><div class="contact-details"><h3>Batman</h3><span>Comics - DC Comics</span></div></div>
            <div class="contact-item" data-category="comics" data-character-name="Superman"><img src="https://via.placeholder.com/150/00bfff/FFFFFF?text=S" alt="Avatar" class="avatar"><div class="contact-details"><h3>Superman</h3><span>Comics - DC Comics</span></div></div>
            <div class="contact-item" data-category="kpop" data-character-name="Jimin (BTS)"><img src="https://via.placeholder.com/150/ffc0cb/000000?text=J" alt="Avatar" class="avatar"><div class="contact-details"><h3>Jimin (BTS)</h3><span>K-Pop - BTS</span></div></div>
            <div class="contact-item" data-category="kpop" data-character-name="Jennie (BLACKPINK)"><img src="https://via.placeholder.com/150/000000/ffc0cb?text=J" alt="Avatar" class="avatar"><div class="contact-details"><h3>Jennie (BLACKPINK)</h3><span>K-Pop - BLACKPINK</span></div></div>
            <div class="contact-item" data-category="series" data-character-name="Daenerys T."><img src="https://via.placeholder.com/150/a052f5/FFFFFF?text=D" alt="Avatar" class="avatar"><div class="contact-details"><h3>Daenerys T.</h3><span>S√©ries - Game of Thrones</span></div></div>
            <div class="contact-item" data-category="games" data-character-name="Link"><img src="https://via.placeholder.com/150/8a2be2/FFFFFF?text=L" alt="Avatar" class="avatar"><div class="contact-details"><h3>Link</h3><span>Games - Zelda</span></div></div>
            <div class="contact-item" data-category="series" data-character-name="Jon Snow"><img src="https://via.placeholder.com/150/a052f5/FFFFFF?text=J" alt="Avatar" class="avatar"><div class="contact-details"><h3>Jon Snow</h3><span>S√©ries - Game of Thrones</span></div></div>
            <div class="contact-item" data-category="animes" data-character-name="Naruto Uzumaki"><img src="https://via.placeholder.com/150/8a2be2/FFFFFF?text=N" alt="Avatar" class="avatar"><div class="contact-details"><h3>Naruto Uzumaki</h3><span>Animes - Naruto</span></div></div>
            <div class="contact-item" data-category="books" data-character-name="Alice (Wonderland)"><img src="https://via.placeholder.com/150/a052f5/FFFFFF?text=A" alt="Avatar" class="avatar"><div class="contact-details"><h3>Alice (Wonderland)</h3><span>Livros - Fantasia</span></div></div>
            <div class="contact-item" data-category="films" data-character-name="Katniss Everdeen"><img src="https://via.placeholder.com/150/8a2be2/FFFFFF?text=K" alt="Avatar" class="avatar"><div class="contact-details"><h3>Katniss Everdeen</h3><span>Filmes - Jogos Vorazes</span></div></div>
        </div>
    </div>

    <div class="profile-panel" id="profile-panel">
        <div class="profile-modal-content">
            <button class="modal-close-button" id="modal-close-button">√ó</button> 

            <div id="profile-main-view">
                <div class="modal-profile-header">
                    <img src="" alt="Avatar" class="modal-profile-avatar" id="modal-profile-avatar">
                    <button id="gallery-button" aria-label="Abrir Galeria"><i class="fas fa-camera"></i></button>
                </div>
                <div class="modal-profile-info">
                    <h3 id="modal-profile-name">Personagem</h3>
                    <button id="music-button" data-song-title="" data-spotify-id="">üé∂</button>
                    <span class="modal-profile-category" id="modal-profile-category">Categoria</span>
                    
                    <div id="spotify-player-container"><p class="spotify-title">M√∫sica Tema:</p></div>
                    
                    <div class="profile-info-cards" id="profile-info-cards"></div>
                    <p class="modal-profile-description" id="modal-profile-description"></p>
                    <div class="profile-action-cards" id="profile-action-cards"></div>
                </div>
            </div>

            <div id="gallery-view">
                <div class="gallery-header">
                    <button id="close-gallery-button" class="back-button"><i class="fas fa-arrow-left"></i> Voltar</button>
                    <h3 id="gallery-title">Galeria</h3>
                    <div style="width: 20px;"></div>
                </div>
                
                <div class="gallery-tabs-container">
                    <button class="gallery-tab-btn active" data-target="gallery-images">Imagens</button>
                    <button class="gallery-tab-btn" data-target="gallery-videos">V√≠deos</button>
                </div>

                <div class="gallery-content-area">
                    <div id="gallery-images" class="gallery-section active">
                        <div class="gallery-grid" id="gallery-grid-container"></div>
                        <div id="image-footer" class="gallery-footer"></div>
                    </div>
                    <div id="gallery-videos" class="gallery-section">
                        <div class="video-list" id="gallery-video-container"></div>
                        <div id="video-footer" class="gallery-footer"></div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Seletores
            const body = document.body;
            const contactList = document.getElementById('contact-list');
            const menuButton = document.getElementById('menu-button'); 
            const closeSidebarButton = document.getElementById('close-sidebar-button'); 
            const profilePanel = document.getElementById('profile-panel'); 
            const modalCloseButton = document.getElementById('modal-close-button');
            const profileMainView = document.getElementById('profile-main-view');
            const modalProfileAvatar = document.getElementById('modal-profile-avatar');
            const modalProfileName = document.getElementById('modal-profile-name');
            const modalProfileCategory = document.getElementById('modal-profile-category');
            const modalProfileDescription = document.getElementById('modal-profile-description');
            const musicButton = document.getElementById('music-button'); 
            const spotifyPlayerContainer = document.getElementById('spotify-player-container');
            const infoCardsContainer = document.getElementById('profile-info-cards'); 
            const actionCardsContainer = document.getElementById('profile-action-cards'); 
            const galleryButton = document.getElementById('gallery-button'); 
            const galleryView = document.getElementById('gallery-view');
            const closeGalleryButton = document.getElementById('close-gallery-button');
            const galleryGridContainer = document.getElementById('gallery-grid-container');
            const galleryVideoContainer = document.getElementById('gallery-video-container');
            const galleryTitle = document.getElementById('gallery-title');
            const galleryTabs = document.querySelectorAll('.gallery-tab-btn');
            const gallerySections = document.querySelectorAll('.gallery-section');
            
            // Novos Seletores de Busca
            const searchInput = document.getElementById('search-input'); 
            const searchBar = document.getElementById('search-bar'); 
            const searchToggle = document.getElementById('search-toggle'); 
            const filterTabs = document.getElementById('filter-tabs');

            // Novos Seletores de Footer da Galeria
            const imageFooter = document.getElementById('image-footer');
            const videoFooter = document.getElementById('video-footer');
            
            // Media Viewer Seletores
            const mediaViewer = document.getElementById('media-viewer');
            const mediaContentWrapper = document.getElementById('media-content-wrapper');
            const closeMediaButton = document.getElementById('close-media-button');

            // Vari√°vel de estado para a categoria ativa
            let activeFilterCategory = 'all';

            // --- DADOS COMPLETOS ---
            const charactersData = {
                "Goku": {
                    avatar: "https://upload.wikimedia.org/wikipedia/en/thumb/f/f5/Goku_Dragon_Ball.png/220px-Goku_Dragon_Ball.png",
                    category: "Animes - Dragon Ball",
                    description: "Son Goku √© o protagonista da franquia Dragon Ball. Ele √© um Saiyajin enviado √† Terra quando crian√ßa e se torna um dos maiores defensores do planeta.",
                    author: "Akira Toriyama", type: "Protagonista", age: "40+", nationality: "Saiyajin/Japon√™s", gender: "Masculino", species: "Saiyajin", friends: "Kuririn, Piccolo, Vegeta", family: "Chichi (Esposa), Gohan (Filho)",
                    song: "Cha-La Head-Cha-La", spotifyId: "5j93iS5c0nNqF3xL7kQx41" 
                },
                "Hermione Granger": {
                    avatar: "https://upload.wikimedia.org/wikipedia/en/thumb/d/d3/Hermione_Granger_poster.jpg/220px-Hermione_Granger_poster.jpg",
                    category: "Livros - Harry Potter",
                    description: "Hermione Jean Granger √© uma bruxa nascida trouxa, a √∫nica filha de Sr. e Sra. Granger, dentistas. Ela foi a melhor amiga de Harry Potter e Rony Weasley.",
                    author: "J.K. Rowling", type: "Trio Principal", age: "11-38", nationality: "Brit√¢nica", gender: "Feminino", species: "Humana (Bruxa)", friends: "Harry Potter, Gina Weasley", family: "Rony Weasley (Marido)",
                    song: "Hedwig's Theme (Instrumental)", spotifyId: "6iX94d0N4q9WnQn3xW6B0k"
                },
                "Mulher Maravilha": {
                    avatar: "https://upload.wikimedia.org/wikipedia/en/thumb/9/91/Wonder_Woman_Rebirth.jpg/220px-Wonder_Woman_Rebirth.jpg",
                    category: "Comics - DC Comics",
                    description: "Diana Prince, a Mulher Maravilha, √© uma amazona e princesa de Themyscira. Ela √© uma das super-hero√≠nas mais ic√¥nicas.",
                    author: "William Moulton Marston", type: "Super-Hero√≠na", age: "Mil√™nios", nationality: "Themyscira (Grega)", gender: "Feminino", species: "Amazona", friends: "Batman, Superman", family: "Rainha Hip√≥lita (M√£e)",
                    song: "Is She With You?", spotifyId: "7q6gGv8oTj0Xgq91T81z4W" 
                },
                "Batman": {
                    avatar: "https://upload.wikimedia.org/wikipedia/en/thumb/7/77/Batman_Arkham_Knight.jpg/220px-Batman_Arkham_Knight.jpg",
                    category: "Comics - DC Comics",
                    description: "Bruce Wayne, o Batman, √© um vigilante de Gotham City que luta contra o crime usando tecnologia, intelig√™ncia e treinamento f√≠sico.",
                    author: "Bob Kane, Bill Finger", type: "Vigilante/Her√≥i", age: "30s-40s", nationality: "Americano", gender: "Masculino", species: "Humano", friends: "Alfred, Robin, Gordon", family: "Thomas e Martha Wayne (Falecidos)",
                    song: "A Dark Knight", spotifyId: "1P2c9nF9sP8q8S8y1N8v7D"
                },
                "Superman": {
                    avatar: "https://upload.wikimedia.org/wikipedia/en/thumb/e/eb/Superman_DCAU.jpg/220px-Superman_DCAU.jpg",
                    category: "Comics - DC Comics",
                    description: "Kal-El, ou Clark Kent, √© o Superman, um alien√≠gena do planeta Krypton enviado √† Terra para sobreviver.",
                    author: "Jerry Siegel, Joe Shuster", type: "Super-Her√≥i", age: "30s", nationality: "Kryptoniano/Americano", gender: "Masculino", species: "Kryptoniano", friends: "Lois Lane, Jimmy Olsen", family: "Jonathan e Martha Kent (Pais adotivos)",
                    song: "Theme from Superman", spotifyId: "1w31x3H8W4hN0m2W6o1QfM" 
                },
                "Jimin (BTS)": {
                    avatar: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Park_Ji-min_at_the_2022_Fact_Music_Awards.jpg/220px-Park_Ji-min_at_the_2022_Fact_Music_Awards.jpg",
                    category: "K-Pop - BTS",
                    description: "Park Ji-min √© um cantor e dan√ßarino sul-coreano. Ele √© vocalista e dan√ßarino principal do grupo masculino de K-Pop, BTS.",
                    author: "Big Hit Music", type: "Idol", age: "28", nationality: "Sul-Coreano", gender: "Masculino", species: "Humano", friends: "Membros do BTS", family: "Pais e Irm√£o",
                    song: "Filter", spotifyId: "3NyPVEAIX1b89UymHj4CgN"
                },
                "Jennie (BLACKPINK)": {
                    avatar: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Jennie_at_the_2022_Fact_Music_Awards.jpg/220px-Jennie_at_the_2022_Fact_Music_Awards.jpg",
                    category: "K-Pop - BLACKPINK",
                    description: "Jennie Kim √© uma cantora, rapper e modelo sul-coreana. Ela √© membro do popular grupo feminino BLACKPINK.",
                    author: "YG Entertainment", type: "Idol", age: "28", nationality: "Sul-Coreana", gender: "Feminino", species: "Humana", friends: "Membros do BLACKPINK", family: "Pais",
                    song: "SOLO", spotifyId: "0Qo54zC7X4fK7VjYp7Vw8o"
                },
                "Daenerys T.": {
                    avatar: "https://upload.wikimedia.org/wikipedia/en/thumb/0/0d/Daenerys_Targaryen_-_Game_of_Thrones.jpg/220px-Daenerys_Targaryen_-_Game_of_Thrones.jpg",
                    category: "S√©ries - Game of Thrones",
                    description: "Daenerys Targaryen √© a √∫ltima herdeira confirmada da Casa Targaryen e busca reivindicar o Trono de Ferro de Westeros.",
                    author: "George R. R. Martin", type: "Protagonista/Rainha", age: "16-24", nationality: "Westerosi", gender: "Feminino", species: "Humana", friends: "Jorah, Missandei", family: "Viserys (Irm√£o)",
                    song: "Game of Thrones Theme", spotifyId: "0bL7Yy495yY7L4oGvC3S7w"
                },
                "Link": {
                    avatar: "https://upload.wikimedia.org/wikipedia/en/thumb/f/fd/Link_BotW.png/220px-Link_BotW.png",
                    category: "Games - Zelda",
                    description: "Link √© o protagonista da s√©rie The Legend of Zelda. Ele √© o her√≥i escolhido que empunha a Master Sword para derrotar Ganon.",
                    author: "Shigeru Miyamoto", type: "Her√≥i", age: "Vari√°vel", nationality: "Hyrule", gender: "Masculino", species: "Hylian", friends: "Zelda", family: "Vari√°vel",
                    song: "Zelda's Lullaby", spotifyId: "0g5r8Jv8n9vD71u5u3S3j9"
                },
                "Jon Snow": {
                    avatar: "https://upload.wikimedia.org/wikipedia/en/thumb/3/30/Jon_Snow_-_Game_of_Thrones.jpg/220px-Jon_Snow_-_Game_of_Thrones.jpg",
                    category: "S√©ries - Game of Thrones",
                    description: "Jon Snow √© um dos personagens principais de Game of Thrones. Inicialmente apresentado como o filho bastardo de Ned Stark.",
                    author: "George R. R. Martin", type: "Protagonista", age: "17-25", nationality: "Westerosi", gender: "Masculino", species: "Humana", friends: "Samwell Tarly", family: "Ned Stark (Tio)",
                    song: "The King in the North", spotifyId: "0o9wG7F6fC5k7yS5S8g4t8"
                },
                "Naruto Uzumaki": {
                    avatar: "https://upload.wikimedia.org/wikipedia/en/thumb/9/94/Naruto_Uzumaki.svg/220px-Naruto_Uzumaki.svg.png",
                    category: "Animes - Naruto",
                    description: "Naruto √© um jovem ninja √≥rf√£o que sonha em se tornar Hokage. Com esp√≠rito indom√°vel, ele supera desafios e faz muitos amigos.",
                    author: "Masashi Kishimoto", type: "Protagonista", age: "12-32", nationality: "Japon√™s (Konoha)", gender: "Masculino", species: "Humano", friends: "Sasuke, Sakura", family: "Minato e Kushina",
                    song: "Blue Bird", spotifyId: "2n7T4kI4y1E5oYFh1uL9b1"
                },
                "Alice (Wonderland)": {
                    avatar: "https://upload.wikimedia.org/wikipedia/en/thumb/b/b3/Alice_in_Wonderland_Alice.png/220px-Alice_in_Wonderland_Alice.png",
                    category: "Livros - Fantasia",
                    description: "Alice √© uma jovem curiosa que cai em um buraco de coelho e se encontra em um mundo fant√°stico e il√≥gico.",
                    author: "Lewis Carroll", type: "Protagonista", age: "7-10", nationality: "Brit√¢nica", gender: "Feminino", species: "Humana", friends: "Chapeleiro Maluco", family: "Irm√£",
                    song: "All in the Golden Afternoon", spotifyId: "1w31x3H8W4hN0m2W6o1QfM"
                },
                "Katniss Everdeen": {
                    avatar: "https://upload.wikimedia.org/wikipedia/en/thumb/3/3d/Katniss_Everdeen.png/220px-Katniss_Everdeen.png",
                    category: "Filmes - Jogos Vorazes",
                    description: "Katniss Everdeen √© uma ca√ßadora habilidosa que se voluntaria para os Jogos Vorazes, tornando-se um s√≠mbolo de rebeli√£o.",
                    author: "Suzanne Collins", type: "Protagonista", age: "16-17", nationality: "Panem", gender: "Feminino", species: "Humana", friends: "Gale, Peeta", family: "Prim (Irm√£)",
                    song: "The Hanging Tree", spotifyId: "3U5kY7rO8rM02tS2uT38j3"
                }
            };

            // --- FUN√á√ïES DE RENDERIZA√á√ÉO E UTILITY ---

            // Fun√ß√£o para abrir a busca do Google (Geral/Imagens/V√≠deos)
            const openGoogleSearch = (characterName, mediaType) => {
                const query = `${characterName} ${mediaType}`;
                let url;
                
                if (mediaType === 'imagens') {
                    // Busca por Imagens
                    url = `https://www.google.com/search?q=${encodeURIComponent(query)}&tbm=isch`;
                } else if (mediaType === 'v√≠deos') {
                    // Busca por V√≠deos
                    url = `https://www.google.com/search?q=${encodeURIComponent(query)}&tbm=vid`;
                } else {
                    // Busca Geral (fallback)
                    url = `https://www.google.com/search?q=${encodeURIComponent(query)}`;
                }

                window.open(url, '_blank');
            };

            // Fun√ß√£o para adicionar o footer da galeria (bot√£o "Ver Mais")
            const addGalleryFooter = (targetContainer, mediaType) => {
                targetContainer.innerHTML = ''; 
                
                const charName = galleryButton.getAttribute('data-character-name');
                if (!charName) return;

                const button = document.createElement('button');
                button.className = 'more-button';
                button.innerHTML = `<i class="fas fa-search"></i> Ver Mais ${mediaType}`;
                button.onclick = () => openGoogleSearch(charName, mediaType);

                targetContainer.appendChild(button);
            };

            // Fun√ß√£o para renderizar os cards de informa√ß√£o
            const renderInfoCards = (character) => {
                infoCardsContainer.innerHTML = '';
                const keys = ['author', 'type', 'age', 'nationality', 'gender', 'species'];
                keys.forEach(key => {
                    if (character[key]) {
                        const card = document.createElement('div');
                        card.className = 'info-card';
                        card.innerHTML = `<strong>${key.toUpperCase()}</strong><span>${character[key]}</span>`;
                        infoCardsContainer.appendChild(card);
                    }
                });
            };

            // Fun√ß√£o para renderizar os cards de a√ß√£o (links externos)
            const renderActionCards = (characterName) => {
                actionCardsContainer.innerHTML = '';
                const encodedName = encodeURIComponent(characterName);

                const actions = [
                    { icon: 'fas fa-globe', text: 'Wikipedia', url: `https://pt.wikipedia.org/wiki/${encodedName}` },
                    { icon: 'fab fa-imdb', text: 'IMDb', url: `https://www.imdb.com/find/?q=${encodedName}` },
                    { icon: 'fab fa-reddit-alien', text: 'Reddit Fan', url: `https://www.reddit.com/search/?q=${encodedName}` }
                ];

                actions.forEach(action => {
                    const card = document.createElement('a');
                    card.className = 'action-card';
                    card.href = action.url;
                    card.target = '_blank';
                    card.innerHTML = `<span><i class="${action.icon}"></i></span>${action.text}`;
                    actionCardsContainer.appendChild(card);
                });
            };

            // Fun√ß√£o para ligar/desligar o player do Spotify
            const toggleSpotifyPlayer = (songTitle, spotifyId) => {
                const isActive = musicButton.classList.contains('active');
                
                if (isActive) {
                    musicButton.classList.remove('active');
                    spotifyPlayerContainer.classList.remove('active');
                    spotifyPlayerContainer.innerHTML = `<p class="spotify-title">M√∫sica Tema:</p>`;
                } else if (spotifyId) {
                    musicButton.classList.add('active');
                    spotifyPlayerContainer.classList.add('active');
                    spotifyPlayerContainer.innerHTML = `
                        <p class="spotify-title">M√öSICA TEMA: ${songTitle}</p>
                        <iframe style="border-radius:6px" 
                            src="https://open.spotify.com/embed/track/${spotifyId}?utm_source=generator" 
                            width="100%" height="80" frameborder="0" allowfullscreen="" 
                            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                            loading="lazy">
                        </iframe>
                    `;
                }
            };

            // Fun√ß√£o para fechar o visualizador de m√≠dia
            const closeMediaViewer = () => {
                mediaViewer.classList.remove('active');
                mediaContentWrapper.innerHTML = '';
            };

            // Fun√ß√£o para abrir o visualizador de m√≠dia
            const openMediaViewer = (type, src) => {
                mediaContentWrapper.innerHTML = '';
                mediaContentWrapper.className = ''; 

                if (type === 'image') {
                    mediaContentWrapper.classList.add('pinterest-style');
                    const img = document.createElement('img');
                    img.src = src;
                    img.alt = 'Visualiza√ß√£o de M√≠dia';
                    mediaContentWrapper.appendChild(img);
                } else if (type === 'video') {
                    mediaContentWrapper.classList.add('youtube-style');
                    const iframe = document.createElement('iframe');
                    iframe.src = src;
                    iframe.title = 'YouTube video player';
                    iframe.frameBorder = '0';
                    iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';
                    iframe.allowFullscreen = true;
                    mediaContentWrapper.appendChild(iframe);
                }

                mediaViewer.classList.add('active');
            };

            // Simula√ß√£o de Dados de Galeria (Adapte com suas URLs reais)
            const getGalleryData = (name) => {
                const baseImage = (idx) => `https://picsum.photos/id/${(name.length * 10) + idx}/300/300`;
                const baseVideoId = (idx) => `dQw4w9WgXcQ`; // Link padr√£o do YouTube

                return {
                    images: [
                        { src: baseImage(1), alt: `${name} Image 1` },
                        { src: baseImage(2), alt: `${name} Image 2` },
                        { src: baseImage(3), alt: `${name} Image 3` },
                        { src: baseImage(4), alt: `${name} Image 4` },
                        { src: baseImage(5), alt: `${name} Image 5` },
                        { src: baseImage(6), alt: `${name} Image 6` },
                    ],
                    videos: [
                        { title: `Trailer Oficial de ${name}`, id: baseVideoId(1) },
                        { title: `Melhores Momentos de ${name}`, id: baseVideoId(2) },
                    ]
                };
            };
            
            // Fun√ß√£o para preencher a galeria
            const populateGallery = (name) => {
                const data = getGalleryData(name);
                galleryTitle.textContent = `Galeria: ${name}`;

                // Imagens
                galleryGridContainer.innerHTML = '';
                data.images.forEach(imgData => {
                    const item = document.createElement('div');
                    item.className = 'gallery-img-item';
                    item.innerHTML = `<img src="${imgData.src}" alt="${imgData.alt}">`;
                    item.addEventListener('click', () => openMediaViewer('image', imgData.src));
                    galleryGridContainer.appendChild(item);
                });
                addGalleryFooter(imageFooter, 'imagens');

                // V√≠deos
                galleryVideoContainer.innerHTML = '';
                data.videos.forEach(videoData => {
                    const item = document.createElement('div');
                    item.className = 'video-item';
                    item.innerHTML = `
                        <div class="video-thumbnail"><i class="fas fa-play"></i></div>
                        <div class="video-info">
                            <h4>${videoData.title}</h4>
                            <span>Clique para assistir</span>
                        </div>
                    `;
                    item.addEventListener('click', () => openMediaViewer('video', `https://www.youtube.com/embed/${videoData.id}?autoplay=1`));
                    galleryVideoContainer.appendChild(item);
                });
                addGalleryFooter(videoFooter, 'v√≠deos');
            };
            
            // L√≥gica de filtro local
            const applyFilter = (searchTerm, filter) => {
                const term = searchTerm.toLowerCase();
                
                contactList.querySelectorAll('.contact-item').forEach(item => {
                    const name = item.querySelector('h3').textContent.toLowerCase();
                    const cat = item.getAttribute('data-category');
                    
                    const passesSearch = name.includes(term);
                    const passesFilter = filter === 'all' || cat === filter;
                    
                    item.style.display = (passesSearch && passesFilter) ? 'flex' : 'none';
                });
            };
            
            // Fun√ß√£o unificada de Busca/Redirecionamento
            const handleSearch = () => {
                const query = searchInput.value.trim();
                const isRedidMode = searchToggle.checked;
                
                if (!query) {
                    if (!isRedidMode) {
                        applyFilter('', activeFilterCategory);
                    }
                    return;
                }
                
                if (!isRedidMode) {
                    // MODO LOCAL: Filtra a lista
                    applyFilter(query, activeFilterCategory);
                } else {
                    // MODO REDID: Abre a busca EXTERNA (Reddit)
                    
                    let searchKeywords = [query];
                    if (activeFilterCategory !== 'all') {
                        searchKeywords.push(activeFilterCategory);
                    }
                    
                    const finalQuery = searchKeywords.join(' ');
                    
                    // Redirecionamento direto para a busca do Reddit
                    const redidSearchUrl = `https://www.reddit.com/search/?q=${encodeURIComponent(finalQuery)}`;
                    
                    window.open(redidSearchUrl, '_blank');
                    
                    // Limpa o campo de busca
                    searchInput.value = '';
                    // No modo Redid, mant√©m todos os contatos vis√≠veis ap√≥s a busca externa
                    contactList.querySelectorAll('.contact-item').forEach(item => item.style.display = 'flex');
                }
            };

            // --- EVENTOS GERAIS ---

            // Evento para abrir o perfil
            contactList.querySelectorAll('.contact-item').forEach(item => {
                item.addEventListener('click', () => {
                    const name = item.getAttribute('data-character-name');
                    const char = charactersData[name];

                    if (!char) return;

                    // Fecha a sidebar em mobile
                    body.classList.remove('menu-open');
                    
                    // Preenche o modal
                    modalProfileAvatar.src = char.avatar;
                    modalProfileName.textContent = name;
                    modalProfileCategory.textContent = char.category;
                    modalProfileDescription.textContent = char.description;
                    musicButton.setAttribute('data-song-title', char.song || '');
                    musicButton.setAttribute('data-spotify-id', char.spotifyId || '');
                    galleryButton.setAttribute('data-character-name', name);
                    
                    // Renderiza cards e galeria
                    renderInfoCards(char);
                    renderActionCards(name);
                    populateGallery(name);
                    
                    // Reseta o estado do player de m√∫sica
                    musicButton.classList.remove('active');
                    spotifyPlayerContainer.classList.remove('active');
                    spotifyPlayerContainer.innerHTML = `<p class="spotify-title">M√∫sica Tema:</p>`;

                    // Reseta a visualiza√ß√£o para o perfil
                    galleryView.classList.remove('active');
                    profileMainView.style.opacity = '1';

                    // Abre o painel
                    body.classList.add('profile-open');
                });
            });

            // Eventos do Menu
            menuButton.addEventListener('click', () => body.classList.toggle('menu-open'));
            closeSidebarButton.addEventListener('click', () => body.classList.remove('menu-open'));

            // Eventos do Perfil
            modalCloseButton.addEventListener('click', () => body.classList.remove('profile-open'));
            profilePanel.addEventListener('click', (e) => {
                // Fechar se clicar no overlay (apenas para mobile)
                if (window.innerWidth < 768 && e.target === profilePanel) {
                    body.classList.remove('profile-open');
                }
            });
            musicButton.addEventListener('click', () => {
                toggleSpotifyPlayer(musicButton.getAttribute('data-song-title'), musicButton.getAttribute('data-spotify-id'));
            });

            // Eventos da Galeria
            galleryButton.addEventListener('click', () => {
                galleryView.classList.add('active');
            });
            closeGalleryButton.addEventListener('click', () => {
                galleryView.classList.remove('active');
            });
            galleryTabs.forEach(tab => {
                tab.addEventListener('click', (e) => {
                    galleryTabs.forEach(t => t.classList.remove('active'));
                    e.target.classList.add('active');
                    
                    gallerySections.forEach(sec => sec.classList.remove('active'));
                    document.getElementById(e.target.getAttribute('data-target')).classList.add('active');
                });
            });

            // Eventos do Media Viewer
            closeMediaButton.addEventListener('click', closeMediaViewer);
            mediaViewer.addEventListener('click', (e) => {
                if (e.target === mediaViewer || e.target === closeMediaButton) {
                    closeMediaViewer();
                }
            });


            // --- L√ìGICA DE BUSCA E FILTRO ---

            // Apenas filtra a lista se estiver no MODO LOCAL
            searchInput.addEventListener('input', (e) => {
                if (!searchToggle.checked) {
                    applyFilter(e.target.value, activeFilterCategory);
                }
            });
            
            // Executa a busca ao apertar ENTER
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault(); 
                    handleSearch(); 
                }
            });

            // L√≥gica do Toggle (Redid Mode)
            searchToggle.addEventListener('change', function() {
                const isChecked = this.checked;
                
                if (isChecked) {
                    // MODO REDID ATIVO
                    searchBar.classList.add('redid-active');
                    // Garante que todos os itens s√£o vis√≠veis
                    contactList.querySelectorAll('.contact-item').forEach(item => item.style.display = 'flex');
                    searchInput.placeholder = `Buscar no Reddit (por ex: "Wallpaper ${activeFilterCategory !== 'all' ? activeFilterCategory : 'Geral'}")`;
                    // Limpa o termo de busca local
                    searchInput.value = ''; 
                } else {
                    // MODO LOCAL ATIVO
                    searchBar.classList.remove('redid-active');
                    applyFilter(searchInput.value, activeFilterCategory); // Reaplica o filtro/busca local
                    searchInput.placeholder = 'Buscar Personagens...';
                }
            });
            
            // L√≥gica de Filtro (Modificada para guardar a categoria ativa e interagir com o toggle)
            filterTabs.querySelectorAll('button').forEach(btn => {
                btn.addEventListener('click', (e) => {
                   filterTabs.querySelectorAll('button').forEach(b => b.classList.remove('active'));
                   e.target.classList.add('active');
                   
                   activeFilterCategory = e.target.getAttribute('data-filter');
                   
                   if (!searchToggle.checked) {
                       // MODO LOCAL: aplica o filtro da categoria e a busca
                       applyFilter(searchInput.value, activeFilterCategory);
                   } else {
                       // MODO REDID: mant√©m todos vis√≠veis e atualiza o placeholder (dica)
                       contactList.querySelectorAll('.contact-item').forEach(item => item.style.display = 'flex');
                       searchInput.placeholder = `Buscar no Reddit (por ex: "Wallpaper ${activeFilterCategory !== 'all' ? activeFilterCategory : 'Geral'}")`;
                   }
                });
            });
            
            // Inicializa√ß√£o
            applyFilter('', 'all'); 

        });
    </script>
</body>
</html>

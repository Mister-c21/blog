<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LoreWiki</title>
<link rel="icon" type="image/x-icon" href="./src/favico.png">

<style>
:root{
    --blueviolet-color: blueviolet;
    --bg-color: #000;
}

*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
}

body{
    width:100vw;
    height:100vh;
    background:#000;
    overflow:hidden;
}

/* SPLASH */
.splash{
    position:fixed;
    inset:0;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    background:#000;
    z-index:10;
    animation:fadeIn .8s ease;
}

.logo{
    font-size:42px;
    font-weight:600;
    color:white;
    letter-spacing:1px;
    position:relative;
}

.logo::after{
    content:'';
    position:absolute;
    left:0;
    bottom:-6px;
    width:100%;
    height:2px;
    background:linear-gradient(90deg,var(--blueviolet-color),transparent);
}

.subtitle{
    margin-top:10px;
    font-size:14px;
    color:#aaa;
}

.loader{
    position:absolute;
    bottom:50px;
    width:28px;
    height:28px;
    border:2px solid rgba(255,255,255,.15);
    border-top:2px solid var(--blueviolet-color);
    border-radius:50%;
    animation:spin 1s linear infinite;
}

/* APP */
.app-container{
    width:100vw;
    height:100vh;
    display:none;
}

.app-container iframe{
    width:100%;
    height:100%;
    border:none;
}

/* ANIMAÇÕES */
@keyframes spin{
    to{ transform:rotate(360deg); }
}

@keyframes fadeIn{
    from{ opacity:0; }
    to{ opacity:1; }
}

.hide{
    opacity:0;
    transition:opacity .6s ease;
}
</style>
</head>

<body>

<div class="splash" id="splash">
    <div class="logo">LW</div>
    <div class="subtitle">LoreWiki</div>
    <div class="loader"></div>
</div>

<div class="app-container" id="app">
    <iframe src="./Home.html" allowfullscreen></iframe>
</div>

<script>
var audioCtx;
var unlocked = false;

/* DESBLOQUEIO DE ÁUDIO (OBRIGATÓRIO NO MOBILE) */
function unlockAudio(){
    if(unlocked) return;

    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    audioCtx.resume().then(function(){
        playSplashSound();
        unlocked = true;
    });

    document.removeEventListener("click", unlockAudio);
    document.removeEventListener("touchstart", unlockAudio);
}

/* SOM DA SPLASH */
function playSplashSound(){
    var osc = audioCtx.createOscillator();
    var gain = audioCtx.createGain();

    osc.type = "sine";
    osc.frequency.setValueAtTime(520, audioCtx.currentTime);
    osc.frequency.exponentialRampToValueAtTime(760, audioCtx.currentTime + 0.3);

    gain.gain.setValueAtTime(0.0001, audioCtx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.12, audioCtx.currentTime + 0.05);
    gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.6);

    osc.connect(gain);
    gain.connect(audioCtx.destination);

    osc.start();
    osc.stop(audioCtx.currentTime + 0.6);
}

/* OUVIR PRIMEIRA INTERAÇÃO */
document.addEventListener("click", unlockAudio);
document.addEventListener("touchstart", unlockAudio);

/* CONTROLE DA SPLASH */
setTimeout(function(){
    var splash = document.getElementById("splash");
    var app = document.getElementById("app");

    splash.classList.add("hide");

    setTimeout(function(){
        splash.style.display = "none";
        app.style.display = "block";
    },600);
},2500);
</script>

</body>
</html>
